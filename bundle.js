(()=>{"use strict";var t={194:(t,e,r)=>{r.r(e),r.d(e,{Easing:()=>i,Group:()=>a,Interpolation:()=>s,Sequence:()=>c,Tween:()=>l,VERSION:()=>h,add:()=>d,default:()=>v,getAll:()=>y,nextId:()=>f,now:()=>o,remove:()=>m,removeAll:()=>g,update:()=>b});var n,i={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-i.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*i.Bounce.In(2*t):.5*i.Bounce.Out(2*t-1)+.5}}},o="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},a=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map((function(e){return t._tweens[e]}))},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},t.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},t.prototype.update=function(t,e){void 0===t&&(t=o()),void 0===e&&(e=!1);var r=Object.keys(this._tweens);if(0===r.length)return!1;for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<r.length;n++){var i=this._tweens[r[n]],a=!e;i&&!1===i.update(t,a)&&!e&&delete this._tweens[r[n]]}r=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}(),s={Linear:function(t,e){var r=t.length-1,n=r*e,i=Math.floor(n),o=s.Utils.Linear;return e<0?o(t[0],t[1],n):e>1?o(t[r],t[r-1],r-n):o(t[i],t[i+1>r?r:i+1],n-i)},Bezier:function(t,e){for(var r=0,n=t.length-1,i=Math.pow,o=s.Utils.Bernstein,a=0;a<=n;a++)r+=i(1-e,n-a)*i(e,a)*t[a]*o(n,a);return r},CatmullRom:function(t,e){var r=t.length-1,n=r*e,i=Math.floor(n),o=s.Utils.CatmullRom;return t[0]===t[r]?(e<0&&(i=Math.floor(n=r*(1+e))),o(t[(i-1+r)%r],t[i],t[(i+1)%r],t[(i+2)%r],n-i)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[r]-(o(t[r],t[r],t[r-1],t[r-1],n-r)-t[r]):o(t[i?i-1:0],t[i],t[r<i+1?r:i+1],t[r<i+2?r:i+2],n-i)},Utils:{Linear:function(t,e,r){return(e-t)*r+t},Bernstein:function(t,e){var r=s.Utils.Factorial;return r(t)/r(e)/r(t-e)},Factorial:(n=[1],function(t){var e=1;if(n[t])return n[t];for(var r=t;r>1;r--)e*=r;return n[t]=e,e}),CatmullRom:function(t,e,r,n,i){var o=.5*(r-t),a=.5*(n-e),s=i*i;return(2*e-2*r+o+a)*(i*s)+(-3*e+3*r-2*o-a)*s+o*i+e}}},c=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),u=new a,l=function(){function t(t,e){void 0===e&&(e=u),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=i.Linear.None,this._interpolationFunction=s.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=c.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.to=function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},t.prototype.duration=function(t){return this._duration=t,this},t.prototype.start=function(t){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var e in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==t?"string"==typeof t?o()+parseFloat(t):t:o(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},t.prototype._setupProperties=function(t,e,r,n){for(var i in r){var o=t[i],a=Array.isArray(o),s=a?"array":typeof o,c=!a&&Array.isArray(r[i]);if("undefined"!==s&&"function"!==s){if(c){var u=r[i];if(0===u.length)continue;u=u.map(this._handleRelativeValue.bind(this,o)),r[i]=[o].concat(u)}if("object"!==s&&!a||!o||c)void 0===e[i]&&(e[i]=o),a||(e[i]*=1),n[i]=c?r[i].slice().reverse():e[i]||0;else{for(var l in e[i]=a?[]:{},o)e[i][l]=o[l];n[i]=a?[]:{},this._setupProperties(o,e[i],r[i],n[i])}}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(t){return void 0===t&&(t=o()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this)),this},t.prototype.resume=function(t){return void 0===t&&(t=o()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},t.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},t.prototype.group=function(t){return this._group=t,this},t.prototype.delay=function(t){return this._delayTime=t,this},t.prototype.repeat=function(t){return this._initialRepeat=t,this._repeat=t,this},t.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},t.prototype.yoyo=function(t){return this._yoyo=t,this},t.prototype.easing=function(t){return this._easingFunction=t,this},t.prototype.interpolation=function(t){return this._interpolationFunction=t,this},t.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},t.prototype.onStart=function(t){return this._onStartCallback=t,this},t.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},t.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},t.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},t.prototype.onStop=function(t){return this._onStopCallback=t,this},t.prototype.update=function(t,e){if(void 0===t&&(t=o()),void 0===e&&(e=!0),this._isPaused)return!0;var r,n,i=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>i)return!1;e&&this.start(t)}if(this._goToEnd=!1,t<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=0===this._duration||n>1?1:n;var a=this._easingFunction(n);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,a),this._onUpdateCallback&&this._onUpdateCallback(this._object,n),1===n){if(this._repeat>0){for(r in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[r]||(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(this._valuesEnd[r])),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,c=this._chainedTweens.length;s<c;s++)this._chainedTweens[s].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(t,e,r,n){for(var i in r)if(void 0!==e[i]){var o=e[i]||0,a=r[i],s=Array.isArray(t[i]),c=Array.isArray(a);!s&&c?t[i]=this._interpolationFunction(a,n):"object"==typeof a&&a?this._updateProperties(t[i],o,a,n):"number"==typeof(a=this._handleRelativeValue(o,a))&&(t[i]=o+(a-o)*n)}},t.prototype._handleRelativeValue=function(t,e){return"string"!=typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?t+parseFloat(e):parseFloat(e)},t.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],r=this._valuesEnd[t];this._valuesStartRepeat[t]="string"==typeof r?this._valuesStartRepeat[t]+parseFloat(r):this._valuesEnd[t],this._valuesEnd[t]=e},t}(),h="18.6.4",f=c.nextId,p=u,y=p.getAll.bind(p),g=p.removeAll.bind(p),d=p.add.bind(p),m=p.remove.bind(p),b=p.update.bind(p);const v={Easing:i,Group:a,Interpolation:s,now:o,Sequence:c,nextId:f,Tween:l,VERSION:h,getAll:y,removeAll:g,add:d,remove:m,update:b}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t="assets/sprites/",e="assets/sounds/",n=45,i={asteroidEmpty:{k:"asteroidEmpty",i:"aempty",x:0,y:0,w:121,h:105},asteroid1:{k:"asteroid1",i:"a1",x:0,y:0,w:121,h:105},asteroid2:{k:"asteroid2",i:"a2",x:0,y:0,w:96,h:96},asteroid3:{k:"asteroid3",i:"a3",x:0,y:0,w:104,h:88},central:{k:"central",i:"basecentral",x:0,y:0,w:76,h:54,fQty:5},client1:{k:"client1",i:"client1",x:0,y:0,w:72,h:85},client2:{k:"client2",i:"client2",x:0,y:0,w:72,h:85},client3:{k:"client3",i:"client3",x:0,y:0,w:72,h:85},client4:{k:"client4",i:"client4",x:0,y:0,w:72,h:85},client5:{k:"client5",i:"client5",x:0,y:0,w:72,h:85},enemy1:{k:"enemy1",i:"enemy1",x:0,y:0,w:32,h:32,fQty:2},enemy2:{k:"enemy2",i:"enemy2",x:0,y:0,w:32,h:32,fQty:2},explosion:{k:"explosion1",i:"explosion1",x:0,y:0,w:16,h:16,fQty:8},crossair:{k:"crossair",i:"crosshair",x:0,y:0,w:64,h:64},flameBlue1:{k:"flameBlue1",i:"flameblue1",x:0,y:0,w:16,h:16,fQty:4},flameBlue2:{k:"flameBlue2",i:"flameblue2",x:0,y:0,w:16,h:16,fQty:4},hero:{k:"hero",i:"ship",x:0,y:0,w:72,h:89,fQty:9},heroShoot:{k:"heroShoot",i:"heroshoot",x:0,y:0,w:16,h:16,fQty:6},inventoryPanel:{k:"inventoryPanel",i:"inventorypanel",x:0,y:0,w:289,h:381},mineralsA:{k:"mineralsA",i:"minerals",x:0,y:0,w:32,h:32},mineralsB:{k:"mineralsB",i:"minerals",x:0,y:32,w:32,h:32},mineralsC:{k:"mineralsC",i:"minerals",x:0,y:64,w:32,h:32},mineralsD:{k:"mineralsD",i:"minerals",x:0,y:96,w:32,h:32},mineralsE:{k:"mineralsE",i:"minerals",x:0,y:128,w:32,h:32},mineralsF:{k:"mineralsF",i:"minerals",x:0,y:160,w:32,h:32},mineralsG:{k:"mineralsG",i:"minerals",x:0,y:192,w:32,h:32},mineralsH:{k:"mineralsH",i:"minerals",x:0,y:224,w:32,h:32},moneyIcon:{k:"moneyIcon",i:"money-icon",x:0,y:0,w:17,h:18},buttonSound:{k:"buttonSound",i:"sound",x:0,y:0,w:50,h:47,fQty:1},stars:{k:"stars",i:"stars",x:0,y:0,w:250,h:250,fQty:1},titleLogo:{k:"titleLogo",i:"title",x:0,y:0,w:204,h:130},titleButtonNewGame:{k:"titleButtonNewGame",i:"buttonnewgame",x:0,y:0,w:280,h:104},ui:{k:"ui",i:"ui",x:0,y:0,w:200,h:50,fQty:2},xpIcon:{k:"xpIcon",i:"xp-icon",x:0,y:0,w:17,h:18},character1Glad:{k:"character1Glad",i:"p1alegre",x:0,y:0,w:20,h:33},character1Angry:{k:"character1Angry",i:"p1enojado",x:0,y:0,w:20,h:33},character1Normal:{k:"character1Normal",i:"p1normal",x:0,y:0,w:20,h:33},character1Surprise:{k:"character1Surprise",i:"p1sorprendido",x:0,y:0,w:20,h:33},character1Sad:{k:"character1Sad",i:"p1Triste",x:0,y:0,w:20,h:33},character2Glad:{k:"character2Glad",i:"p2alegre",x:0,y:0,w:20,h:33},character2Angry:{k:"character2Angry",i:"p2enojado",x:0,y:0,w:20,h:33},character2Normal:{k:"character2Normal",i:"p2normal",x:0,y:0,w:20,h:33},character2Surprise:{k:"character2Surprise",i:"p2sorprendido",x:0,y:0,w:20,h:33},character2Sad:{k:"character2Sad",i:"p2triste",x:0,y:0,w:20,h:33},character3Glad:{k:"character3Glad",i:"p3alegre",x:0,y:0,w:20,h:33},character3Angry:{k:"character3Angry",i:"p3enojado",x:0,y:0,w:20,h:33},character3Normal:{k:"character3Normal",i:"p3normal",x:0,y:0,w:20,h:33},character3Surprise:{k:"character3Surprise",i:"p3sorprendido",x:0,y:0,w:20,h:33},character3Sad:{k:"character3Sad",i:"p3triste",x:0,y:0,w:20,h:33},character4Glad:{k:"character4Glad",i:"p4alegre",x:0,y:0,w:20,h:33},character4Angry:{k:"character4Angry",i:"p4enojado",x:0,y:0,w:20,h:33},character4Normal:{k:"character4Normal",i:"p4normal",x:0,y:0,w:20,h:33},character4Surprise:{k:"character4Surprise",i:"p4sorprendido",x:0,y:0,w:20,h:33},character4Sad:{k:"character4Sad",i:"p4triste",x:0,y:0,w:20,h:33},impact1:{k:"impact1",i:"impacts",x:0,y:0,w:100,h:89},impact2:{k:"impact2",i:"impacts",x:100,y:0,w:100,h:89},impact3:{k:"impact3",i:"impacts",x:200,y:0,w:100,h:89},impact4:{k:"impact4",i:"impacts",x:300,y:0,w:100,h:89},impact5:{k:"impact5",i:"impacts",x:0,y:89,w:100,h:89},impact6:{k:"impact6",i:"impacts",x:100,y:89,w:100,h:89},impact7:{k:"impact7",i:"impacts",x:200,y:89,w:100,h:89},impact8:{k:"impact8",i:"impacts",x:300,y:89,w:100,h:89},impact9:{k:"impact9",i:"impacts",x:100,y:178,w:100,h:89},impact10:{k:"impact10",i:"impacts",x:200,y:178,w:100,h:89}},o=[i.impact1,i.impact2,i.impact3,i.impact4,i.impact5,i.impact6,i.impact7,i.impact8,i.impact9,i.impact10],a=[i.explosion],s=[{id:"A",requiredXp:10,period:10,timeShopping:5,sheet:i.client1},{id:"B",requiredXp:20,period:15,timeShopping:5,sheet:i.client2},{id:"C",requiredXp:30,period:25,timeShopping:5,sheet:i.client3},{id:"D",requiredXp:40,period:10,timeShopping:5,sheet:i.client4},{id:"E",requiredXp:50,period:15,timeShopping:5,sheet:i.client5}],c=[i.asteroid1,i.asteroid2,i.asteroid3],u=[{type:"A",name:"A",chance:[1,20],sheet:i.mineralsA},{type:"B",name:"B",chance:[21,30],sheet:i.mineralsB},{type:"C",name:"C",chance:[31,40],sheet:i.mineralsC},{type:"D",name:"D",chance:[41,50],sheet:i.mineralsD},{type:"E",name:"E",chance:[51,60],sheet:i.mineralsE},{type:"F",name:"F",chance:[61,70],sheet:i.mineralsF},{type:"G",name:"G",chance:[71,80],sheet:i.mineralsG},{type:"H",name:"H",chance:[81,100],sheet:i.mineralsH}];function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function h(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return(e=b(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b(n.key),n)}}function b(t){var e=function(t,e){if("object"!==l(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===l(e)?e:String(e)}var v=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"random",value:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},{key:"colision",value:function(t,e){return t.x+t.w>e.x&&t.y+t.h>e.y&&t.x<e.x+e.w&&t.y<e.y+e.h}},{key:"isHiting",value:function(t,e){if(e){if("spr"===e.type)return t.x>=e.x-e.w/2&&t.x<=e.x+e.w+e.w/2&&t.y>=e.y-e.h/2&&t.y<=e.y+e.w+e.h/2;if("bkg"===e.type)return t.x>=e.x&&t.x<=e.x+e.w&&t.y>=e.y&&t.y<=e.y+e.h}return!1}},{key:"toRadiants",value:function(t){return t*(Math.PI/180)}},{key:"radiants",value:function(e,r,n){if(r){var i=e.x-r.x,o=e.y-r.y;return Math.atan2(i,o)}if(n)return t.toRadiants(n)}},{key:"pathLinear",value:function(t,e,r){for(var n=e.x-t.x,i=e.y-t.y,o=Math.floor(Math.abs(i/r)),a=Math.floor(Math.abs(n/r)),s=a>o,c={x:t.x,y:t.y},u=[],l=s?a:o,h=0,f=0;f<l;f++)s?(h=r/(a/o),e.y<c.y?c.y=c.y-h:c.y=c.y+h,e.x<c.x?c.x=c.x-r:c.x=c.x+r):(h=r/(o/a),e.y<c.y?c.y=c.y-r:c.y=c.y+r,e.x<c.x?c.x=c.x-h:c.x=c.x+h),c.x,e.x,c.y,e.y,u.push(y({},c));return u}},{key:"randomOuterPoint",value:function(){var t=this.random(0,3),e=this.random(-g.OffSetVertical,g.H+g.OffSetVertical),r=this.random(-g.OffSetHorizontal,g.W+g.OffSetHorizontal);return[{x:r,y:-g.OffSetVertical-80},{x:g.W+g.OffSetHorizontal+80,y:e},{x:r,y:g.H+g.OffSetVertical+80},{x:-g.OffSetHorizontal-80,y:e}][t]}},{key:"randomNoVisiblePoint",value:function(){var t=this.random(0,3),e=200,r=this.random(0,g.H),n=this.random(0,g.W);return[{x:n,y:-200},{x:g.W+e,y:r},{x:n,y:g.H+e},{x:-200,y:r}][t]}},{key:"valueInMargin",value:function(t,e,r,n){return t>=e-n&&t<=e+r+n}},{key:"updateQtyList",value:function(t,e,r){var n=h(t);return n.map((function(t){return t.type})).includes(e)?n.map((function(t){return t.type===e&&(t.qty=r?t.qty+1:t.qty-1),t})):r?[].concat(h(n),[{type:e,qty:1}]):void 0}},{key:"getNumberAscending",value:function(t,e){return t<e?t+1:e}},{key:"wrapText",value:function(t,e,r,n,i){for(var o=t.split(" "),a="",s="",c=[],u=0;u<o.length;u++)s+="".concat(o[u]," "),ctx.measureText(s).width>n&&u>0?(c.push({line:a,x:e,y:r}),r+=i,a="".concat(o[u]," "),s="".concat(o[u]," ")):a+="".concat(o[u]," "),u===o.length-1&&c.push({line:a,x:e,y:r});return c}},{key:"absInt",value:function(t){return Math.abs(parseInt(t.toString()))}}],(r=null)&&m(e.prototype,r),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){O(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function O(t,e,r){return(e=P(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,P(n.key),n)}}function P(t){var e=function(t,e){if("object"!==w(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===w(e)?e:String(e)}var j=r(194),_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type="spr",this.y=e.y,this.x=e.x,this.h=e.h,this.w=e.w,this.fVertical=e.fVertical,this.target=e.target,this.r=e.r,e.id&&(this.id=e.id),e.fixed&&(this.fixed=e.fixed),e.hits&&(this.hits=e.hits),e.hitsLimit&&(this.hitsLimit=e.hitsLimit),e.loops&&(this.loops=e.loops,this.currentLoop=1),e.metadata&&(this.metadata=e.metadata),e.mini&&(this.mini=e.mini),e.sheet&&(this.sheet=e.sheet),e.scaleX&&(this.scaleX=e.scaleX),e.scaleY&&(this.scaleY=-e.scaleY),this.sheet&&this.updateImage()}var e,r,n;return e=t,r=[{key:"updateImage",value:function(){this.img=g.Sprites[this.sheet.k]}},{key:"framing",value:function(){this.sheet.fQty&&(this.fVertical?this.sheet.y=this.fCurrent*this.sheet.h:this.sheet.x=this.fCurrent*this.sheet.w,this.fCurrent<this.sheet.fQty-1?this.fCurrent++:this.fCurrent=0)}},{key:"colisionWith",value:function(t){var e=this;return t.find((function(t){return v.colision(t,e)}))}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.looping(),this.positionByHero(),this.framing(),this.going(),this.isVisible()?this.drawNormal(t):this.drawMini()}},{key:"drawNormal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};ctx.imageSmoothingEnabled=!1,ctx.save(),ctx.translate(this.x,this.y),ctx.rotate(-this.r),ctx.scale(this.scaleX,this.scaleY),this.drawImage(x(x({},this),{},{x:this.w/-2,y:this.h/-2})),t(),ctx.restore(),j.update()}},{key:"drawImage",value:function(t){var e=t.x,r=t.y,n=t.w,i=t.h,o=t.img,a=t.sheet;ctx.drawImage(o,a.x,a.y,a.w,a.h,e,r,n,i)}},{key:"drawMini",value:function(){if(this.mini){var t={x:0,y:0};this.x+this.w<0&&(t.x=0),this.x>g.VisibleArea.w&&(t.x=g.VisibleArea.w-this.w/4),this.x>=0&&this.x<=g.VisibleArea.w&&(t.x=this.x),this.y+this.y<0&&(t.y=0),this.y>g.VisibleArea.h&&(t.y=g.VisibleArea.h-this.w/4),this.y>=0&&this.y<=g.VisibleArea.h&&(t.y=this.y),this.drawImage(x(x({},this),{},{x:t.x,y:t.y,w:this.w/4,h:this.h/4}))}}},{key:"setPath",value:function(t,e){var r=this;this.currentPathIndex=0;var n={x:this.x,y:this.y},i={x:t.x,y:t.y};this.path=v.pathLinear(n,i,e),this.internalState={rotationInterval:0},this.internalState.rotationInterval=new j.Tween({r:this.r}).to({r:v.radiants(n,i)},550).easing(j.Easing.Cubic.Out).onUpdate((function(t){return r.r=t.r})).start()}},{key:"going",value:function(){var t=this.currentPathIndex;this.path&&this.path[t]?(this.currentPos=this.path[t],this.previousPos=this.path[t>0?t-1:t],this.moving=!0,this.x=this.path[t].x,this.y=this.path[t].y,this.currentPathIndex++):this.moving=!1}},{key:"hit",value:function(){this.hits||(this.hits=0),this.hits=this.hits+1}},{key:"looping",value:function(){this.currentLoop=this.currentLoop===this.loops?0:this.currentLoop+1}},{key:"fadeOut",value:function(){this.currentLoop<this.loops&&(this.y=this.y-2)}},{key:"positionByHero",value:function(){this.fixed||"hero"!==this.id&&g.Hero&&(g.Hero.goingTop&&(this.y=this.y+g.SpeedHero),g.Hero.goingRight&&(this.x=this.x-g.SpeedHero),g.Hero.goingBottom&&(this.y=this.y-g.SpeedHero),g.Hero.goingLeft&&(this.x=this.x+g.SpeedHero))}},{key:"isVisible",value:function(){return!g.VisibleArea||v.colision(g.VisibleArea,{x:this.x-this.w,y:this.y-this.h,w:this.w+this.w,h:this.h+this.h})}}],r&&k(e.prototype,r),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function C(t,e,r){return(e=I(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function H(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,I(n.key),n)}}function I(t){var e=function(t,e){if("object"!==T(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===T(e)?e:String(e)}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=A(t);if(e){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}(o,t);var e,r,n,i=R(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).type="bkg",e}return e=o,r=[{key:"draw",value:function(){this.positionByHero(),this.isVisible()&&this.drawImage(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){C(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},this))}},{key:"positionByHero",value:function(){this.fixed||(g.BkgProportion=2,g.Hero.goingTop&&(this.y=this.y+g.SpeedHero/g.BkgProportion),g.Hero.goingRight&&(this.x=this.x-g.SpeedHero/g.BkgProportion),g.Hero.goingBottom&&(this.y=this.y-g.SpeedHero/g.BkgProportion),g.Hero.goingLeft&&(this.x=this.x+g.SpeedHero/g.BkgProportion))}}],r&&H(e.prototype,r),n&&H(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(_);function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==B(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===B(o)?o:String(o)),n)}var i,o}var N={engine:"engines.mp3",asteroidEmpty:"asteroidempty.mp3",miningclick:"miningclick.mp3",mineralFound:"mineralfound.mp3",pickoupcoin:"pickupcoin.mp3",powerup23:"powerup23.mp3",inventoryOpen:"inventory-open.mp3",clientBuy:"client-buy.mp3",clientNobuy:"client-nobuy.mp3",mineralSelect:"mineral-select.mp3",mineralUnselect:"mineral-unselect.mp3"},V=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,n,i;return r=t,i=[{key:"play",value:function(t){g.SoundOn&&new Audio(e+N[t]).play()}}],(n=null)&&D(r.prototype,n),i&&D(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}();function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function W(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==G(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===G(o)?o:String(o)),n)}var i,o}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X(t,e)}function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=U(t);if(e){var i=U(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===G(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function U(t){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},U(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X(t,e)}(o,t);var e,r,n,i=F(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).text=t.text,e.color=t.color,e.colorLine=t.colorLine,e.size=t.size,e.align=t.align||"start",e}return e=o,n=[{key:"hiting",value:function(t,e,r,n,i){var a=new o({text:t,x:e,y:r,color:n,colorLine:i,size:arguments.length>5&&void 0!==arguments[5]?arguments[5]:32,loops:30});g.HitsLabels.push(a)}}],(r=[{key:"draw",value:function(){this.fadeOut(),ctx.font="".concat(this.size,"px ArcadeClassic"),ctx.fillStyle=this.color,ctx.textAlign="end",ctx.fillText(this.text,this.x,this.y),ctx.strokeStyle=this.colorLine,ctx.strokeText(this.text,this.x,this.y),this.looping()}}])&&W(e.prototype,r),n&&W(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(_);function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==z(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===z(o)?o:String(o)),n)}var i,o}function Y(t,e){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Y(t,e)}function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=K(t);if(e){var i=K(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function K(t){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},K(t)}var $=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y(t,e)}(o,t);var e,r,n,i=J(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).color=t.color,e.alpha=t.alpha,e.w=t.w,e.h=t.h,e}return e=o,(r=[{key:"draw",value:function(){ctx.save(),ctx.globalAlpha=this.alpha,ctx.fillStyle=this.color,ctx.fillRect(this.x,this.y,this.w,this.h),ctx.restore()}}])&&Q(e.prototype,r),n&&Q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(_);function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function tt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function et(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(r),!0).forEach((function(e){rt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rt(t,e,r){return(e=it(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,it(n.key),n)}}function it(t){var e=function(t,e){if("object"!==Z(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Z(e)?e:String(e)}function ot(t,e){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ot(t,e)}function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=st(t);if(e){var i=st(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function st(t){return st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},st(t)}var ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ot(t,e)}(a,t);var e,r,n,o=at(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this,t)).origin=t.origin,e.destiny=t.destiny,e.speed=t.speed,e.x=t.origin.x,e.y=t.origin.y,e.xDirection=e.getXDirection(),e.yDirection=e.getYDirection(),e.dialog=t.dialog,e.loopsCompleted=0,e.done=!1,e.background=new $({x:0,y:g.H/2-165,w:g.W,h:330,color:t.backgroundColor||"blue",alpha:.2}),e}return e=a,n=[{key:"call",value:function(t,e,r){var n=i[t];g.Characters.push(new a({id:t,origin:{x:-200,y:g.H/2},destiny:{x:150,y:g.H/2},w:n.w,h:n.h,sheet:n,scaleX:10,scaleY:-10,fixed:!0,speed:20,dialog:e,loops:50,backgroundColor:r}))}}],(r=[{key:"remove",value:function(){var t=et({},this.origin),e=et({},this.destiny);this.origin=e,this.destiny=t,this.xDirection=this.getXDirection(),this.yDirection=this.getYDirection(),this.dialog=""}},{key:"getX",value:function(){var t=this.speed,e=this.x,r=e+t>=this.destiny.x-t&&e-t<=this.destiny.x+t;return"still"===this.xDirection||r?(this.xDirection="still",this.x):"left"===this.xDirection?this.x-this.speed:this.x+this.speed}},{key:"getY",value:function(){var t=this.y-this.speed>=this.destiny.y||this.y+this.speed<=this.destiny.y;return"still"===this.yDirection||t?this.y:"top"===this.yDirection?this.y-this.speed:this.y+this.speed}},{key:"getXDirection",value:function(){return this.destiny.x===this.origin.x?"still":this.destiny.x<this.origin.x?"left":"right"}},{key:"getYDirection",value:function(){return this.destiny.y===this.origin.y?"still":this.destiny.y>this.origin.y?"bottom":"top"}},{key:"checkLoops",value:function(){this.currentLoop===this.loops&&(this.currentLoop=0,this.loopsCompleted=this.loopsCompleted+1,1===this.loopsCompleted&&this.remove()),this.done=2===this.loopsCompleted}},{key:"move",value:function(){this.isVisible()&&this.background.draw(),this.draw(),this.checkLoops(),this.x=this.getX(),this.y=this.getY(),this.dialog.length>0&&"still"===this.xDirection&&"still"===this.yDirection&&(ctx.font="30px ArcadeClassic",ctx.fillStyle="white",ctx.textAlign="center",v.wrapText(this.dialog,this.destiny.x+150,this.y-100,200,32).forEach((function(t){ctx.fillText(t.line,t.x,t.y)})))}},{key:"drawing",value:function(){var t=this;this.done?g.Characters=g.Characters.filter((function(e){return e.id===t.id})):this.move()}}])&&nt(e.prototype,r),n&&nt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(_);function ut(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function lt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(r),!0).forEach((function(e){ht(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ht(t,e,r){return(e=yt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}function pt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yt(n.key),n)}}function yt(t){var e=function(t,e){if("object"!==ft(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ft(e)?e:String(e)}function gt(t,e){return gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gt(t,e)}function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=mt(t);if(e){var i=mt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function mt(t){return mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mt(t)}var bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gt(t,e)}(a,t);var e,r,n,o=dt(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this,t)).id="hero",e.x=g.W/2,e.y=g.H/2,e.sheet=i.hero,e.fVertical=!0,e.r=0,e.scaleX=1,e.scaleY=-1,e.goingLeft=!1,e.goingRight=!1,e.goingTop=!1,e.goingBottom=!1,e.inCentral=!1,e.updateImage(),e.resetCargo(),e.flame1=new _({x:e.w/-2-16,y:e.h/-2-6,w:40,h:48,sheet:i.flameBlue1}),e.flame2=new _({x:e.w/-2+40,y:e.h/-2-6,w:40,h:48,sheet:i.flameBlue1}),e}return e=a,(r=[{key:"click",value:function(t){g.Inventory.showInventory||v.isHiting(t,g.UiPanel.soundButton)||(v.isHiting(t,g.CurrentAsteroid)||V.play("engine"),this.setPath({x:t.x,y:t.y},g.SpeedHero))}},{key:"mining",value:function(t,e,r){this.xp+=t,g.XpTotal+=t,q.hiting(t.toString(),e,r,"blue","white")}},{key:"addCargoMineral",value:function(){this.xp+=8;var t=this.getCargoMineralsPosition(),e=u.find((function(t){return t.type===g.CurrentAsteroid.mineralType})),r={name:e.name,chance:e.chance,type:e.type},n=new _({metadata:r,sheet:e.sheet,x:t.x,y:t.y,w:this.w/2,h:this.w/2,r:v.random(0,360)});this.cargoMinerals.push(n)}},{key:"getCargoMineralsPosition",value:function(){return this.cargoMineralsPositions.pop()}},{key:"unloadCargo",value:function(){this.inCentral&&this.xp>0&&this.cargoMinerals.length>0&&(V.play("powerup23"),q.hiting(this.xp.toString(),this.x,this.y,"blue","white"),g.XpTotal+=this.xp,this.cargoMinerals.forEach((function(t){g.MineralsHistory=v.updateQtyList(g.MineralsHistory,t.metadata.type,!0),g.MineralsStock=v.updateQtyList(g.MineralsStock,t.metadata.type,!0)})),this.resetCargo(),g.Inventory.mineralsUpdateSlots(),ct.call("character1Glad","WELL DONE!","blue"))}},{key:"resetCargo",value:function(){this.xp=0,this.cargoMinerals=[],this.cargoMineralsPositions=[{x:-this.w/7,y:-this.h/2},{x:-this.w/2.5,y:-this.h/2},{x:-this.w/7,y:-this.h/3},{x:-this.w/2.5,y:-this.h/3}]}},{key:"checkDirection",value:function(){this.currentPos&&(this.goingTop=this.currentPos.y<this.previousPos.y&&this.y<g.Margin&&g.Anchor.y+g.Anchor.h+g.SpeedHero<g.LevelLimits.b,this.goingRight=this.currentPos.x>this.previousPos.x&&this.x>g.W-g.Margin&&g.Anchor.x-g.SpeedHero>g.LevelLimits.l,this.goingBottom=this.currentPos.y>this.previousPos.y&&this.y+this.h>g.H-g.Margin&&g.Anchor.y-g.SpeedHero>g.LevelLimits.t,this.goingLeft=this.currentPos.x<this.previousPos.x&&this.x<g.Margin&&g.Anchor.x+g.Anchor.w+g.SpeedHero<g.LevelLimits.r)}},{key:"going",value:function(){var t=this.currentPathIndex;if(this.path&&this.path[t]){this.currentPos=this.path[t],this.previousPos=this.path[t>0?t-1:t],this.moving=!0,this.currentPathIndex++;var e=this.path[t].x,r=this.path[t].y;e>g.Margin-11&&e<g.W-g.Margin+11&&(this.x=e),r>g.Margin-11&&r<g.H-g.Margin&&(this.y=r)}else this.moving=!1}},{key:"checkMoving",value:function(){return this.moving||this.goingTop||this.goingRight||this.goingBottom||this.goingLeft}},{key:"checkEmemys",value:function(){if(g.Enemys.length>0){var t=g.Enemys.filter((function(t){return t.isVisible()}));if(t.length>0)return void(this.enemyTarget=t[0])}this.enemyTarget=null}},{key:"checkShoot",value:function(){if(this.checkEmemys(),this.enemyTarget&&(this.shoot||(this.shoot=new _({x:g.Hero.x,y:g.Hero.y,h:20,w:20,r:this.r,sheet:i.heroShoot}),this.shoot.setPath({x:this.enemyTarget.x,y:this.enemyTarget.y},g.SpeedHeroShoot)),this.shoot)){if(this.shoot.currentPathIndex>this.shoot.path.length-2)return void(this.shoot=null);if(v.colision(this.shoot,this.enemyTarget))return this.enemyTarget.hit(),void(this.shoot=null);this.shoot.draw()}}},{key:"checkLooted",value:function(){var t=this.cargoMinerals.pop();return this.cargoMineralsPositions.push({x:t.x,y:t.y}),t}},{key:"checkCargo",value:function(){return this.cargoMinerals.length>0}},{key:"checkInCentral",value:function(){this.inCentral="object"===ft(this.colisionWith([g.Central]))}},{key:"checkCargoFull",value:function(){return 4===this.cargoMinerals.length}},{key:"drawing",value:function(){var t=this;this.unloadCargo(),this.checkDirection(),this.framing(),this.checkShoot(),this.draw((function(){t.cargoMinerals.forEach((function(e){t.drawImage(lt({},e))})),t.checkMoving()&&(t.flame1.framing(),t.drawImage(lt({},t.flame1)),t.flame2.framing(),t.drawImage(lt({},t.flame2)))}))}}])&&pt(e.prototype,r),n&&pt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(_);function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function wt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==vt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===vt(o)?o:String(o)),n)}var i,o}function St(t,e){return St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},St(t,e)}function xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ot(t);if(e){var i=Ot(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===vt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ot(t){return Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ot(t)}var kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&St(t,e)}(a,t);var e,r,n,o=xt(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this,t)).type="star",e}return e=a,n=[{key:"getGroups",value:function(){return g.StarsData.map((function(t){return new a({x:t.x,y:t.y,w:32,h:32,sheet:{k:i.stars.k,i:i.stars.i,x:t.fX,y:t.fY,w:50,h:50,fQty:1}})}))}}],(r=null)&&wt(e.prototype,r),n&&wt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(L);function Pt(t){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt(t)}function jt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Pt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Pt(o)?o:String(o)),n)}var i,o}function _t(t,e){return _t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_t(t,e)}function Tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Et(t);if(e){var i=Et(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Pt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Et(t){return Et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Et(t)}var Ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_t(t,e)}(a,t);var e,r,n,o=Tt(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this,t)).sheet=i.crossair,e.r=0,e.currentLoop=0,e.loops=3,e.updateImage(),e}return e=a,(r=[{key:"draw",value:function(){g.CurrentAsteroid&&(g.CurrentAsteroid.empty||(this.x=g.CurrentAsteroid.x,this.y=g.CurrentAsteroid.y,this.looping(),this.currentLoop===this.loops&&(this.r++,this.r=this.r>360?0:this.r++,this.currentLoop=0),this.drawNormal()))}}])&&jt(e.prototype,r),n&&jt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(_);function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function It(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Ht(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ht(o)?o:String(o)),n)}var i,o}var Mt=[{x:0,y:0,t:"A"},{x:50,y:0,t:"B"},{x:100,y:0,t:"C"},{x:150,y:0,t:"D"},{x:200,y:0,t:"E"},{x:250,y:0,t:"F"},{x:300,y:0,t:"G"},{x:350,y:0,t:"H"}],Rt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setPanelStock(),this.setPanelSale(),this.setStockMinerals(),this.setSaleMinerals()}var e,r,n;return e=t,(r=[{key:"setPanelStock",value:function(){this.panelStock=new L({w:400,h:80,sheet:i.ui,fixed:!0,fVertical:!0}),this.panelStock.x=g.W/2-this.panelStock.w/2-20,this.panelStock.y=g.H-this.panelStock.h/2-30,this.textStock=new q({text:"STOCK",x:this.panelStock.x+this.panelStock.w/2-10,y:this.panelStock.y+30,size:24,color:"black",colorLine:"white",align:"center"})}},{key:"setPanelSale",value:function(){this.panelSale=new L({w:400,h:80,sheet:i.ui,fixed:!0}),this.panelSale.x=g.W/2+this.panelSale.w/2+20,this.panelSale.y=g.H-this.panelSale.h/2-30,this.textSale=new q({text:"SALE",x:this.panelSale.x-130,y:this.panelSale.y+30,size:24,color:"black",colorLine:"white",align:"start"})}},{key:"setStockMinerals",value:function(){var t=this;this.slotsStock=Mt.filter((function(e){return!!t.getMineralModel(e.t)})).map((function(e){var r=t.getMineralModel(e.t);return{type:e.t,qty:0,spriteImage:new L({fixed:!0,x:t.panelStock.x-t.panelStock.w/2+e.x,y:t.panelStock.y+e.y-40,w:48,h:48,sheet:r.sheet}),spriteText:new q({x:t.panelStock.x-t.panelStock.w/2+e.x+40,y:t.panelStock.y+e.y+10,size:24,color:"black",colorLine:"white",align:"end"})}}))}},{key:"setSaleMinerals",value:function(){var t=this;this.slotsSale=Mt.filter((function(e){return!!t.getMineralModel(e.t)})).map((function(e){var r=t.getMineralModel(e.t);return{type:e.t,qty:0,spriteImage:new L({fixed:!0,x:t.panelSale.x-t.panelSale.w/2+e.x,y:t.panelSale.y+e.y-40,w:48,h:48,sheet:r.sheet}),spriteText:new q({x:t.panelSale.x-t.panelSale.w/2+e.x+40,y:t.panelSale.y+e.y+10,size:24,color:"black",colorLine:"white",align:"center"})}}))}},{key:"getMineralModel",value:function(t){return u.find((function(e){return e.type===t}))}},{key:"mineralsUpdateSlots",value:function(){this.slotsStock=this.slotsStock.map((function(t){var e=g.MineralsStock.find((function(e){return e.type===t.type}));return e&&(t.qty=e.qty,t.spriteText.text=e.qty),t})),this.slotsSale=this.slotsSale.map((function(t){var e=g.MineralsOnSale.find((function(e){return e.type===t.type}));return e&&(t.qty=e.qty,t.spriteText.text=e.qty),t}))}},{key:"mineralAddToSale",value:function(t){g.MineralsStock=v.updateQtyList(g.MineralsStock,t,!1),g.MineralsOnSale=v.updateQtyList(g.MineralsOnSale,t,!0),this.mineralsUpdateSlots()}},{key:"mineralReturnToStock",value:function(t){g.MineralsOnSale=v.updateQtyList(g.MineralsOnSale,t,!1),g.MineralsStock=v.updateQtyList(g.MineralsStock,t,!0),this.mineralsUpdateSlots()}},{key:"mineralSold",value:function(t){g.MineralsOnSale=v.updateQtyList(g.MineralsOnSale,t,!1),this.mineralsUpdateSlots()}},{key:"click",value:function(t){var e=this;this.slotsStock.forEach((function(r){v.isHiting(t,r.spriteImage)&&r.qty>0&&(V.play("mineralSelect"),e.mineralAddToSale(r.type))})),this.slotsSale.forEach((function(r){v.isHiting(t,r.spriteImage)&&r.qty>0&&(V.play("mineralUnselect"),e.mineralReturnToStock(r.type))}))}},{key:"draw",value:function(){this.panelStock.framing(),this.panelStock.drawNormal(),this.panelSale.drawNormal(),this.textStock.draw(),this.textSale.draw(),this.slotsStock.filter((function(t){return t.qty>0})).forEach((function(t){t.spriteImage.draw(),t.spriteText.draw()})),this.slotsSale.filter((function(t){return t.qty>0})).forEach((function(t){t.spriteImage.draw(),t.spriteText.draw()}))}}])&&It(e.prototype,r),n&&It(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function Lt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==At(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==At(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===At(o)?o:String(o)),n)}var i,o}var Bt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fontSize=24,this.create(),this.setSoundButton()}var e,r,n;return e=t,(r=[{key:"create",value:function(){this.setXp(),this.setMoney()}},{key:"setXp",value:function(){this.xpPanel=new L({fixed:!0,w:144,h:24,sheet:i.ui}),this.xpPanel.x=g.W/2+g.W/10,this.xpPanel.y=this.xpPanel.h,this.xpIcon=new _({fixed:!0,w:24,h:24,fVertical:!1,sheet:i.xpIcon}),this.xpIcon.x=this.xpPanel.x+this.xpPanel.w-this.xpIcon.w/2,this.xpIcon.y=this.xpPanel.y+this.xpIcon.h/1.8,this.xpText=new q({x:this.xpPanel.x+this.xpPanel.w-this.xpIcon.w,y:this.xpPanel.y+20,size:this.fontSize,color:"black",colorLine:"white",align:"end"})}},{key:"setMoney",value:function(){this.moneyPanel=new L({fixed:!0,w:144,h:24,sheet:i.ui}),this.moneyPanel.x=g.W/2-this.moneyPanel.w-g.W/10,this.moneyPanel.y=this.moneyPanel.h,this.moneyIcon=new _({fixed:!0,w:24,h:24,fVertical:!1,sheet:i.moneyIcon}),this.moneyIcon.x=this.moneyPanel.x+this.moneyPanel.w-this.moneyIcon.w/2,this.moneyIcon.y=this.moneyPanel.y+this.xpIcon.h/1.8,this.moneyText=new q({x:this.moneyPanel.x+this.moneyPanel.w-this.moneyIcon.w,y:this.moneyPanel.y+20,size:this.fontSize,color:"black",colorLine:"white",align:"end"})}},{key:"click",value:function(t){v.isHiting(t,this.soundButton)&&(g.SoundOn?(g.SoundOn=!1,this.soundButton.sheet.y=47):(g.SoundOn=!0,this.soundButton.sheet.y=0))}},{key:"setSoundButton",value:function(){this.soundButton=new L({fixed:!0,w:32,h:32,sheet:i.buttonSound}),this.soundButton.x=g.W-this.soundButton.w-5,this.soundButton.y=5}},{key:"draw",value:function(){this.xpText.text=v.getNumberAscending(Number(this.xpText.text),g.XpTotal).toString(),this.moneyText.text=v.getNumberAscending(Number(this.moneyText.text),g.MoneyTotal).toString(),this.xpPanel.draw(),this.xpIcon.draw(),this.xpText.draw(),this.moneyPanel.draw(),this.moneyIcon.draw(),this.moneyText.draw(),this.soundButton.draw()}}])&&Lt(e.prototype,r),n&&Lt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Dt(t){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function Nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Dt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Dt(o)?o:String(o)),n)}var i,o}function Vt(t,e){return Vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vt(t,e)}function Gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Wt(t);if(e){var i=Wt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Wt(t){return Wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wt(t)}var Xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vt(t,e)}(a,t);var e,r,n,i=Gt(a);function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,t)}return e=a,n=[{key:"get",value:function(t,e,r,n){var i=o[v.random(0,o.length-1)];return new a({x:t.x,y:t.y,w:100,h:89,r:v.random(0,180),sheet:i,loops:e,scaleX:r,scaleY:n})}},{key:"add",value:function(t,e,r,n){g.Impacts.push(a.get(t,e,r,n))}}],(r=[{key:"drawing",value:function(){this.draw(),g.Impacts=g.Impacts.filter((function(t){return t.currentLoop>0}))}}])&&Nt(e.prototype,r),n&&Nt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(_);function Ft(t){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}function Ut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Ft(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ft(o)?o:String(o)),n)}var i,o}function qt(t,e){return qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qt(t,e)}function zt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Qt(t);if(e){var i=Qt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Qt(t){return Qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qt(t)}var Yt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qt(t,e)}(o,t);var e,r,n,i=zt(o);function o(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,t)}return e=o,n=[{key:"get",value:function(t){var e=a[v.random(0,a.length-1)];return new o({x:t.x,y:t.y,w:160,h:160,r:v.random(0,180),sheet:e,fVertical:!1,loops:9})}},{key:"add",value:function(t){g.Explosions.push(this.get(t))}}],(r=[{key:"drawing",value:function(){this.draw(),g.Explosions=g.Explosions.filter((function(t){return t.currentLoop<9}))}}])&&Ut(e.prototype,r),n&&Ut(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(_);function Jt(t){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jt(t)}function Kt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $t(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Kt(Object(r),!0).forEach((function(e){Zt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Zt(t,e,r){return(e=ee(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function te(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ee(n.key),n)}}function ee(t){var e=function(t,e){if("object"!==Jt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Jt(e)?e:String(e)}function re(t,e){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},re(t,e)}function ne(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ie(t);if(e){var i=ie(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ie(t){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ie(t)}var oe=v,ae=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&re(t,e)}(a,t);var e,r,n,o=ne(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this,t)).destiny={x:g.Central.x,y:g.Central.y},e.loot=void 0,e.r=0,e.scaleX=1,e.scaleY=1,e.path=[],e.pathBlocked=!1,e.origin=oe.randomNoVisiblePoint(),e.x=e.origin.x,e.y=e.origin.y,e.mini=!0,e.fixed=!0,e}return e=a,n=[{key:"create",value:function(){g.Enemys.push(new a({id:"e"+oe.random(1,99999999),h:64,w:64,sheet:i.enemy1,fVertical:!0,hits:1,hitsLimit:100}))}},{key:"spawn",value:function(){0===oe.random(0,g.EnemyRate)&&this.create()}}],(r=[{key:"pathByHero",value:function(){this.checkPath(),g.Hero.goingTop&&(this.y=this.y+g.SpeedEnemy,this.path=this.path.map((function(t){return $t($t({},t),{},{y:t.y+g.SpeedEnemy})}))),g.Hero.goingRight&&(this.x=this.x-g.SpeedEnemy,this.path=this.path.map((function(t){return $t($t({},t),{},{x:t.x-g.SpeedEnemy})}))),g.Hero.goingBottom&&(this.y=this.y-g.SpeedEnemy,this.path=this.path.map((function(t){return $t($t({},t),{},{y:t.y-g.SpeedEnemy})}))),g.Hero.goingLeft&&(this.x=this.x+g.SpeedEnemy,this.path=this.path.map((function(t){return $t($t({},t),{},{x:t.x+g.SpeedEnemy})})))}},{key:"checkPath",value:function(){if(this.loot||this.checkCloseToHero()||!g.Hero.checkCargo())return!this.loot&&this.checkCloseToHero()?(this.path=[],g.Hero.checkCargo()&&(this.loot=g.Hero.checkLooted()),void this.scapeFromHero()):void(this.loot&&this.scapeFromHero());this.persuitHero()}},{key:"persuitHero",value:function(){var t=this.path.length>0?this.path[this.path.length-1]:{x:0,y:0};oe.valueInMargin(oe.absInt(g.Hero.x),oe.absInt(t.x),0,10)||oe.valueInMargin(oe.absInt(g.Hero.y),oe.absInt(t.y),0,10)||this.setPath({x:oe.absInt(g.Hero.x),y:oe.absInt(g.Hero.y)},g.SpeedEnemy)}},{key:"scapeFromHero",value:function(){var t=this;0===this.path.length&&this.setPath(oe.randomOuterPoint(),1.5*g.SpeedEnemy);var e=this.path[this.currentPathIndex];e?(oe.absInt(e.x)<-g.OffSetHorizontal/2||oe.absInt(e.x)>g.W+g.OffSetHorizontal/2||oe.absInt(e.y)<-g.OffSetVertical/2||oe.absInt(e.y)>g.W+g.OffSetHorizontal/2)&&(g.Enemys=g.Enemys.filter((function(e){return t.id!==e.id}))):this.setPath(oe.randomOuterPoint(),1.5*g.SpeedEnemy)}},{key:"hit",value:function(){var t=this;this.hits=this.hits+1;var e=this.path[this.currentPathIndex+5];e&&Xt.add({x:e.x,y:e.y},3,this.scaleX,this.scaleY),q.hiting((this.hitsLimit-this.hits).toString(),this.x,this.y,"red","black"),this.hits===this.hitsLimit&&(Yt.add({x:this.x,y:this.y}),g.Enemys=g.Enemys.filter((function(e){return e.id!==t.id})))}},{key:"checkCloseToHero",value:function(){return oe.valueInMargin(this.x,g.Hero.x,g.Hero.w,50)&&oe.valueInMargin(this.y,g.Hero.y,g.Hero.h,50)}},{key:"drawing",value:function(){var t=this;this.pathByHero(),this.draw((function(){var e=t.loot;e&&t.drawImage($t({},e))}))}}])&&te(e.prototype,r),n&&te(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(_);function se(t){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},se(t)}function ce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ue(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ce(Object(r),!0).forEach((function(e){le(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function le(t,e,r){return(e=fe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function he(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fe(n.key),n)}}function fe(t){var e=function(t,e){if("object"!==se(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===se(e)?e:String(e)}function pe(t,e){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pe(t,e)}function ye(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ge(t);if(e){var i=ge(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===se(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ge(t){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ge(t)}var de=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pe(t,e)}(a,t);var e,r,n,o=ye(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this,t)).mineralType=t.mineralType,e.empty=!1,e.currentLoop=0,e.loops=3,e.rotationDirection=t.rotationDirection,e.rotationSpeed=t.rotationSpeed,e.r=v.radiants(void 0,void 0,180*Math.random()),e.hitsLimit=3,e.rotationDirection=1===v.random(0,1)?"r":"l",e.rotationSpeed=.01*v.random(1,3),e}return e=a,n=[{key:"create",value:function(){var t=this.getModel(),e=new a({x:t.x,y:t.y,w:t.w,h:t.h,sheet:ue(ue({},t),{},{x:0,y:0}),mineralType:this.getRandomMineralType()}),r=1*Math.random()+.5;e.scaleX=r,e.scaleY=r,g.Asteroids.push(e)}},{key:"setGroups",value:function(t,e){var r=this,n=Math.ceil(t/e);return Array.from({length:n},(function(){return Array.from({length:e},(function(){return r.create()}))}))}},{key:"getRandomMineralType",value:function(){var t=v.random(1,100);return u.find((function(e){return t>=e.chance[0]&&t<=e.chance[1]})).type}},{key:"getModel",value:function(){var t=c[v.random(0,c.length-1)],e=ue(ue({},t),{},{x:v.random(-g.W-g.OffSetHorizontal+2*t.w,g.W+g.OffSetHorizontal-2*t.w),y:v.random(-g.H-g.OffSetVertical+2*t.h,g.OffSetVertical+g.H-2*t.h)}),r=(ue({},e),v.colision(e,g.CenterVoid)),n=g.Asteroids.flat().some((function(t){return v.colision(t,e)}));return r||n?this.getModel():e}}],(r=[{key:"click",value:function(t){if(g.CurrentAsteroid.isClickIn(t))if(g.CurrentAsteroid.empty)q.hiting("0",this.x,this.y,"white","red");else if(g.Hero.checkCargoFull())q.hiting("FULL",this.x,this.y,"orange","black");else switch(this.hit(),this.hits){case 1:this.impact(),this.heroMining(3);break;case 2:this.impact(),this.heroMining(5);break;case this.hitsLimit:this.impact(),this.setEmpty(),g.Hero.addCargoMineral(),ae.spawn()}}},{key:"impact",value:function(){Xt.add({x:this.x,y:this.y},5,this.scaleX,this.scaleY)}},{key:"heroMining",value:function(t){g.Hero.mining(t,this.x,this.y),V.play("miningclick")}},{key:"setEmpty",value:function(){V.play("asteroidEmpty"),this.empty=!0,this.sheet=i.asteroidEmpty,this.updateImage()}},{key:"isClickIn",value:function(t){return v.isHiting(t,this)}},{key:"draw",value:function(){this.looping(),this.positionByHero(),this.currentLoop===this.loops&&(this.r="r"===this.rotationDirection?this.r+this.rotationSpeed:this.r-this.rotationSpeed,this.currentLoop=0),this.isVisible()&&this.drawNormal()}}])&&he(e.prototype,r),n&&he(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(_);function me(t){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(t)}function be(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ve(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?be(Object(r),!0).forEach((function(e){we(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function we(t,e,r){return(e=xe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Se(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xe(n.key),n)}}function xe(t){var e=function(t,e){if("object"!==me(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===me(e)?e:String(e)}function Oe(t,e){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Oe(t,e)}function ke(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Pe(t);if(e){var i=Pe(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===me(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Pe(t){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pe(t)}var je=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oe(t,e)}(a,t);var e,r,n,o=ke(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this,t)).period=t.period,e.timeShopping=t.timeShopping,e.destiny={x:g.Central.x,y:g.Central.y},e.r=0,e.scaleX=1,e.scaleY=1,e.path=[],e.pathBlocked=!1,e.isOutside=!1,e.inCentral=!1,e.origin=v.randomOuterPoint(),e.x=e.origin.x,e.y=e.origin.y,e.mini=!0,e.fixed=!0,e.flame1=new _({x:e.w/-2+8,y:e.h/-2+68,w:40,h:48,sheet:i.flameBlue2}),e}return e=a,n=[{key:"create",value:function(){g.Clients.length!==s.length&&s.filter((function(t){return g.XpTotal>t.requiredXp&&!g.Clients.find((function(e){return t.id===e.id}))})).forEach((function(t){g.Clients.push(new a({id:t.id,h:64,w:56,period:t.period,timeShopping:t.timeShopping,sheet:t.sheet}))}))}}],(r=[{key:"pathByHero",value:function(){g.Hero.goingTop&&(this.y=this.y+g.SpeedHero,this.path=this.path.map((function(t){return ve(ve({},t),{},{y:t.y+g.SpeedHero})}))),g.Hero.goingRight&&(this.x=this.x-g.SpeedHero,this.path=this.path.map((function(t){return ve(ve({},t),{},{x:t.x-g.SpeedHero})}))),g.Hero.goingBottom&&(this.y=this.y-g.SpeedHero,this.path=this.path.map((function(t){return ve(ve({},t),{},{y:t.y-g.SpeedHero})}))),g.Hero.goingLeft&&(this.x=this.x+g.SpeedHero,this.path=this.path.map((function(t){return ve(ve({},t),{},{x:t.x+g.SpeedHero})})))}},{key:"checkPath",value:function(){if(this.isOutside=this.x<-g.OffSetHorizontal||this.x>g.W+g.OffSetHorizontal||this.y<-g.OffSetVertical||this.y>g.H+g.OffSetVertical,this.inCentral=v.valueInMargin(this.x,g.Central.x,g.Central.w,10)&&v.valueInMargin(this.y,g.Central.y,g.Central.h,10),this.path.length>0&&this.currentPathIndex===this.path.length&&(this.path=[],this.currentPathIndex=0,this.pathBlocked=!1),this.isOutside){if(this.pathBlocked)return;g.GlobalTime%this.period==0&&(this.x=this.origin.x,this.y=this.origin.y,this.setPath(g.Central,g.SpeedClient),this.pathBlocked=!0)}if(this.isOutside||this.inCentral||(this.pathBlocked=!1),this.inCentral){if(this.pathBlocked)return;this.timeArrivalCentral?g.GlobalTime>this.timeArrivalCentral&&(g.GlobalTime-this.timeArrivalCentral)%this.timeShopping==0&&(this.buyMineral(),this.setPath(this.origin,g.SpeedClient),this.pathBlocked=!0,this.origin=v.randomOuterPoint()):this.timeArrivalCentral=g.GlobalTime}}},{key:"buyMineral",value:function(){var t=this,e=g.MineralsOnSale.filter((function(t){return t.qty>0}));if(e.length>0){this.mineralTypeToBuy=e[v.random(0,e.length-1)].type,g.Inventory.mineralSold(this.mineralTypeToBuy);var r=u.find((function(e){return e.type===t.mineralTypeToBuy}));this.mineralCargo=new _({metadata:r,sheet:r.sheet,x:this.w/-2,y:this.h/-2,w:this.w,h:this.w,r:v.random(0,180)});var n=g.MineralsPrices.find((function(e){return e.type===t.mineralTypeToBuy})).price;g.MoneyTotal+=n,q.hiting(n.toString(),this.x,this.y,"gold","black"),V.play("clientBuy")}else q.hiting("SOLD OUT",this.x,this.y,"red","white"),V.play("clientNobuy")}},{key:"drawing",value:function(){var t=this;this.checkPath(),this.pathByHero(),this.isOutside&&(this.mineralCargo=null),this.draw((function(){var e=t.mineralCargo;e&&t.drawImage(ve({},e)),t.moving&&(t.flame1.framing(),t.drawImage(ve({},t.flame1)))}))}}])&&Se(e.prototype,r),n&&Se(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(_);function _e(t){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_e(t)}function Te(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==_e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===_e(o)?o:String(o)),n)}var i,o}var Ee=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.Asteroids=[],this.BkgProportion=4,this.CargoTotal=0,this.CurrentScreen="titleSetup",this.Enemys=[],this.EnemyRate=10,this.EnemysHitLimit=10,this.Explosions=[],this.GlobalTime=0,this.GameOver=!1,this.H=window.innerHeight,this.HitsLabels=[],this.Impacts=[],this.Loaded=!1,this.MarkTime=0,this.Margin=200,this.MineralsStock=[],this.MineralsOnSale=[],this.MineralsPrices=[],this.MineralsHistory=[],this.MoneyTotal=0,this.Pause=!1,this.Stars=[],this.StarsData=[],this.SetNewGame=!0,this.SoundOn=!0,this.SpeedHero=10,this.SpeedClient=.7*this.SpeedHero,this.SpeedEnemy=.6*this.SpeedHero,this.SpeedHeroShoot=2*this.SpeedHero,this.Sprites={},this.XpTotal=0,this.W=window.innerWidth,this.setCenterVoid(),this.setLimits(),this.LevelLimits={t:-this.OffSetVertical,r:this.W+this.OffSetHorizontal,b:this.H+this.OffSetVertical,l:-this.OffSetHorizontal}}var e,r,n;return e=t,(r=[{key:"save",value:function(){var t=this.getSaveData(),e=new Date;e.setTime(e.getTime()+864e9),e.toUTCString(),document.cookie="spaceminer="+t,console.log("save ok!",t)}},{key:"getSaveData",value:function(){var t={MineralsStock:g.MineralsStock,MineralsOnSale:g.MineralsOnSale,MineralsHistory:g.MineralsHistory,XpTotal:g.XpTotal,MoneyTotal:g.MoneyTotal};return JSON.stringify(t)}},{key:"setCenterVoid",value:function(){this.W<500?this.CenterVoid={x:0,y:this.H/10,w:this.W,h:this.H-this.H/10*2}:this.CenterVoid={x:this.W/10,y:this.H/10,w:this.W-this.W/10*2,h:this.H-this.H/10*2}}},{key:"setLimits",value:function(){this.W<500?(this.OffSetHorizontal=5*this.W,this.OffSetVertical=3*this.H):(this.OffSetHorizontal=2*this.W,this.OffSetVertical=2*this.H)}},{key:"load",value:function(){}},{key:"newGame",value:function(){g.StarsData=Array.from({length:1e3},(function(){return{x:v.random(g.LevelLimits.l,g.LevelLimits.r),y:v.random(g.LevelLimits.t,g.LevelLimits.b),fX:50*v.random(0,4),fY:50*v.random(0,4)}}))}}])&&Te(e.prototype,r),n&&Te(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ce(t){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ce(t)}function He(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Ce(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ce(o)?o:String(o)),n)}var i,o}var Ie=function(){function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.assetsLoaded=0,this.totalAssetsCount=0,this.loadingScreen=document.getElementById("loading-screen"),this.loadingBar=document.getElementById("loading-bar"),this.loadingText=document.getElementById("loading-text"),this.canvas=document.getElementById("canvas")}var n,o,a;return n=r,(o=[{key:"objectListing",value:function(r,n){var i={};for(var o in r)Object.hasOwnProperty.call(r,o)&&("png"===n&&(i[o]=t+r[o].i+"."+n),"mp3"===n&&(i[o]=e+r[o]));return i}},{key:"assetLoaded",value:function(){this.assetsLoaded++;var t=Math.floor(this.assetsLoaded/this.totalAssetsCount*100);this.loadingBar.style.width="".concat(t,"%"),this.loadingText.textContent="Loading: ".concat(t,"%"),this.assetsLoaded===this.totalAssetsCount&&(this.loadingScreen.style.display="none",this.canvas.style.display="block",g.Loaded=!0)}},{key:"preloadImages",value:function(){var t=this;for(var e in this.allAssets.images){var r=new Image;r.src=this.allAssets.images[e],r.onload=function(){return t.assetLoaded()},g.Sprites[e]=r}}},{key:"preloadSounds",value:function(){var t=this;for(var e in this.allAssets.sounds){var r=new Audio;r.src=this.allAssets.sounds[e],r.addEventListener("canplaythrough",(function(){return t.assetLoaded()}),!1)}}},{key:"loadAssets",value:function(){this.allAssets={images:this.objectListing(i,"png"),sounds:this.objectListing(N,"mp3")},this.totalAssetsCount=Object.keys(this.allAssets.images).length+Object.keys(this.allAssets.sounds).length,this.preloadImages(),this.preloadSounds()}}])&&He(n.prototype,o),a&&He(n,a),Object.defineProperty(n,"prototype",{writable:!1}),r}(),Me=document.getElementById("canvas");function Re(){if(g.Loaded)switch(ctx.clearRect(0,0,g.W,g.H),g.CurrentScreen){case"titleSetup":g.ScreenTitle={title:new L({w:200,h:130,x:g.W/2-100,y:g.H/2-200,sheet:i.titleLogo,r:0,scaleX:1,scaleY:-1,fixed:!0}),buttonNewGame:new L({w:200,h:50,x:g.W/2-100,y:g.H/2,sheet:i.titleButtonNewGame,r:0,scaleX:1,scaleY:-1,fixed:!0}),click:function(t){v.isHiting(t,g.ScreenTitle.buttonNewGame)?(console.log("START NEW GAME!"),g.CurrentScreen="levelStart"):console.log("nope!")}},g.CurrentScreen="title",document.body.addEventListener("click",g.ScreenTitle.click);break;case"title":g.ScreenTitle.title.draw(),g.ScreenTitle.buttonNewGame.draw();break;case"levelStart":g.newGame(),g.load(),g.SetNewGame&&(g.GameOver=!1,g.SetNewGame=!1,g.Background=new $({x:0,y:0,w:g.W,h:g.H,color:"#2c2137",alpha:1}),g.Anchor=new _({id:"anchor",x:0,y:0,w:g.W/8,h:g.H/8}),g.VisibleArea=new $({id:"visiblArea",x:0,y:0,w:g.W,h:g.H}),g.Stars=kt.getGroups(),de.setGroups(500,50),g.Central=new _({w:160,h:128,x:g.W/2,y:g.H/2,sheet:i.central,fVertical:!0,mini:!0}),g.Hero=new bt({h:80,w:64}),g.Hero.target={x:g.Hero.x,y:g.Hero.y},g.Clients=[],g.Crosshair=new Ct({w:64,h:64}),g.Inventory=new Rt,g.UiPanel=new Bt,g.Characters=[]),g.CurrentScreen="action",g.MarkTime=0,g.GlobalTime=0,g.MineralsPrices=[{type:"A",price:5},{type:"B",price:10},{type:"C",price:20},{type:"D",price:50},{type:"E",price:60},{type:"F",price:70},{type:"G",price:80},{type:"H",price:90},{type:"I",price:100}],document.body.removeEventListener("click",g.ScreenTitle.click),document.body.addEventListener("click",(function(t){var e;g.Hero.click(t),null===(e=g.CurrentAsteroid)||void 0===e||e.click(t),g.UiPanel.click(t),g.Inventory.click(t)}));break;case"action":je.create(),g.CurrentAsteroid=g.Hero.colisionWith(g.Asteroids.flat()),g.Hero.checkInCentral(),g.Anchor.positionByHero(),g.Background.draw(),g.Stars.forEach((function(t){return t.draw()})),g.Asteroids.flat().forEach((function(t){return t.draw()})),g.Impacts.forEach((function(t){return t.drawing()})),g.Clients.forEach((function(t){return t.drawing()})),g.Crosshair.draw(),g.Central.draw(),g.Enemys.forEach((function(t){return t.drawing()})),g.Hero.drawing(),g.HitsLabels.forEach((function(t){return t.draw()})),g.HitsLabels=g.HitsLabels.filter((function(t){return t.currentLoop<t.loops})),g.Inventory.draw(),g.UiPanel.draw(),g.Characters.forEach((function(t){return t.drawing()})),g.Explosions.forEach((function(t){return t.drawing()}))}}globalThis.g=new Ee,globalThis.ctx=Me.getContext("2d"),Me.width=g.W,Me.height=g.H,setInterval((function(){g.GlobalTime=g.GlobalTime+.5}),500),(new Ie).loadAssets();setInterval(Re,n)})()})();