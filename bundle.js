(()=>{"use strict";var t={194:(t,e,n)=>{n.r(e),n.d(e,{Easing:()=>i,Group:()=>s,Interpolation:()=>a,Sequence:()=>u,Tween:()=>l,VERSION:()=>h,add:()=>d,default:()=>v,getAll:()=>p,nextId:()=>f,now:()=>o,remove:()=>b,removeAll:()=>g,update:()=>m});var r,i={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-i.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*i.Bounce.In(2*t):.5*i.Bounce.Out(2*t-1)+.5}}},o="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},s=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map((function(e){return t._tweens[e]}))},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},t.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},t.prototype.update=function(t,e){void 0===t&&(t=o()),void 0===e&&(e=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var i=this._tweens[n[r]],s=!e;i&&!1===i.update(t,s)&&!e&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}(),a={Linear:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=a.Utils.Linear;return e<0?o(t[0],t[1],r):e>1?o(t[n],t[n-1],n-r):o(t[i],t[i+1>n?n:i+1],r-i)},Bezier:function(t,e){for(var n=0,r=t.length-1,i=Math.pow,o=a.Utils.Bernstein,s=0;s<=r;s++)n+=i(1-e,r-s)*i(e,s)*t[s]*o(r,s);return n},CatmullRom:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=a.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(i=Math.floor(r=n*(1+e))),o(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],r-i)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):o(t[i?i-1:0],t[i],t[n<i+1?n:i+1],t[n<i+2?n:i+2],r-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=a.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:(r=[1],function(t){var e=1;if(r[t])return r[t];for(var n=t;n>1;n--)e*=n;return r[t]=e,e}),CatmullRom:function(t,e,n,r,i){var o=.5*(n-t),s=.5*(r-e),a=i*i;return(2*e-2*n+o+s)*(i*a)+(-3*e+3*n-2*o-s)*a+o*i+e}}},u=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),c=new s,l=function(){function t(t,e){void 0===e&&(e=c),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=i.Linear.None,this._interpolationFunction=a.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=u.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.to=function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},t.prototype.duration=function(t){return this._duration=t,this},t.prototype.start=function(t){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var e in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==t?"string"==typeof t?o()+parseFloat(t):t:o(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},t.prototype._setupProperties=function(t,e,n,r){for(var i in n){var o=t[i],s=Array.isArray(o),a=s?"array":typeof o,u=!s&&Array.isArray(n[i]);if("undefined"!==a&&"function"!==a){if(u){var c=n[i];if(0===c.length)continue;c=c.map(this._handleRelativeValue.bind(this,o)),n[i]=[o].concat(c)}if("object"!==a&&!s||!o||u)void 0===e[i]&&(e[i]=o),s||(e[i]*=1),r[i]=u?n[i].slice().reverse():e[i]||0;else{for(var l in e[i]=s?[]:{},o)e[i][l]=o[l];r[i]=s?[]:{},this._setupProperties(o,e[i],n[i],r[i])}}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(t){return void 0===t&&(t=o()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this)),this},t.prototype.resume=function(t){return void 0===t&&(t=o()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},t.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},t.prototype.group=function(t){return this._group=t,this},t.prototype.delay=function(t){return this._delayTime=t,this},t.prototype.repeat=function(t){return this._initialRepeat=t,this._repeat=t,this},t.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},t.prototype.yoyo=function(t){return this._yoyo=t,this},t.prototype.easing=function(t){return this._easingFunction=t,this},t.prototype.interpolation=function(t){return this._interpolationFunction=t,this},t.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},t.prototype.onStart=function(t){return this._onStartCallback=t,this},t.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},t.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},t.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},t.prototype.onStop=function(t){return this._onStopCallback=t,this},t.prototype.update=function(t,e){if(void 0===t&&(t=o()),void 0===e&&(e=!0),this._isPaused)return!0;var n,r,i=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>i)return!1;e&&this.start(t)}if(this._goToEnd=!1,t<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(t-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var s=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,s),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,u=this._chainedTweens.length;a<u;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(t,e,n,r){for(var i in n)if(void 0!==e[i]){var o=e[i]||0,s=n[i],a=Array.isArray(t[i]),u=Array.isArray(s);!a&&u?t[i]=this._interpolationFunction(s,r):"object"==typeof s&&s?this._updateProperties(t[i],o,s,r):"number"==typeof(s=this._handleRelativeValue(o,s))&&(t[i]=o+(s-o)*r)}},t.prototype._handleRelativeValue=function(t,e){return"string"!=typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?t+parseFloat(e):parseFloat(e)},t.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],n=this._valuesEnd[t];this._valuesStartRepeat[t]="string"==typeof n?this._valuesStartRepeat[t]+parseFloat(n):this._valuesEnd[t],this._valuesEnd[t]=e},t}(),h="18.6.4",f=u.nextId,y=c,p=y.getAll.bind(y),g=y.removeAll.bind(y),d=y.add.bind(y),b=y.remove.bind(y),m=y.update.bind(y);const v={Easing:i,Group:s,Interpolation:a,now:o,Sequence:u,nextId:f,Tween:l,VERSION:h,getAll:p,removeAll:g,add:d,remove:b,update:m}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t="./assets/sprites/",e="./assets/sounds/",r=45,i=8,o=6,s=2,a=2,u=2,c=2,l={asteroid1:"a1",asteroid2:"a2",asteroid3:"a3",asteroid4:"a4",asteroid5:"a5",asteroid6:"a6",central:"central",client1:"client1",client2:"client2",client3:"client3",client4:"client4",client5:"client5",controlsIcon:"controls-icon",explosions:"explosions",inventoryPanel:"inventorypanel",minerals:"minerals",moneyIcon:"money-icon",stars:"stars",sound:"sound",ui:"ui",xpIcon:"xp-icon"},h=[{id:"A",requiredXp:10,period:10,timeShopping:5,sheet:{img:l.client1,x:0,y:0,w:50,h:50}},{id:"B",requiredXp:20,period:15,timeShopping:5,sheet:{img:l.client2,x:0,y:0,w:50,h:50}},{id:"C",requiredXp:30,period:25,timeShopping:5,sheet:{img:l.client3,x:0,y:0,w:50,h:50}},{id:"D",requiredXp:40,period:10,timeShopping:5,sheet:{img:l.client4,x:0,y:0,w:50,h:50}},{id:"E",requiredXp:50,period:15,timeShopping:5,sheet:{img:l.client5,x:0,y:0,w:50,h:50}}],f=[{x:0,y:0,w:15,h:13,sheet:{x:0,y:0,w:121,h:105,img:l.asteroid1}},{x:0,y:0,w:12,h:12,sheet:{x:0,y:0,w:96,h:96,img:l.asteroid2}},{x:0,y:0,w:13,h:11,sheet:{x:0,y:0,w:104,h:88,img:l.asteroid3}}],y=[{type:"A",name:"1",chance:[1,20],sheet:{img:l.minerals,x:0,y:0,w:32,h:32}},{type:"B",name:"2",chance:[21,30],sheet:{img:l.minerals,x:0,y:32,w:32,h:32}},{type:"C",name:"3",chance:[31,40],sheet:{img:l.minerals,x:0,y:64,w:32,h:32}},{type:"D",name:"4",chance:[41,50],sheet:{img:l.minerals,x:0,y:96,w:32,h:32}},{type:"E",name:"5",chance:[51,60],sheet:{img:l.minerals,x:0,y:128,w:32,h:32}},{type:"F",name:"6",chance:[61,70],sheet:{img:l.minerals,x:0,y:160,w:32,h:32}},{type:"G",name:"7",chance:[71,80],sheet:{img:l.minerals,x:0,y:192,w:32,h:32}},{type:"H",name:"8",chance:[81,100],sheet:{img:l.minerals,x:0,y:224,w:32,h:32}}],p=[{x:0,y:0,w:100,h:89},{x:100,y:0,w:100,h:89},{x:200,y:0,w:100,h:89},{x:300,y:0,w:100,h:89},{x:0,y:89,w:100,h:89},{x:100,y:89,w:100,h:89},{x:200,y:89,w:100,h:89},{x:300,y:89,w:100,h:89},{x:100,y:178,w:100,h:89},{x:200,y:178,w:100,h:89}];function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function b(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){x(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function x(t,e,n){return(e=O(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O(r.key),r)}}function O(t){var e=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===d(e)?e:String(e)}var P=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"random",value:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},{key:"colision",value:function(t,e){return t.x+t.w>e.x&&t.y+t.h>e.y&&t.x<e.x+e.w&&t.y<e.y+e.h}},{key:"isHiting",value:function(t,e){if(e){if("spr"===e.type)return t.x>=e.x-e.w/2&&t.x<=e.x+e.w+e.w/2&&t.y>=e.y-e.h/2&&t.y<=e.y+e.w+e.h/2;if("bkg"===e.type)return t.x>=e.x&&t.x<=e.x+e.w&&t.y>=e.y&&t.y<=e.y+e.h}return!1}},{key:"toRadiants",value:function(t){return t*(Math.PI/180)}},{key:"radiants",value:function(e,n,r){if(n){var i=e.x-n.x,o=e.y-n.y;return Math.atan2(i,o)}if(r)return t.toRadiants(r)}},{key:"pathLinear",value:function(t,e,n){for(var r=e.x-t.x,i=e.y-t.y,o=Math.floor(Math.abs(i/n)),s=Math.floor(Math.abs(r/n)),a=s>o,u={x:t.x,y:t.y},c=[],l=a?s:o,h=0,f=0;f<l;f++)a?(h=n/(s/o),e.y<u.y?u.y=u.y-h:u.y=u.y+h,e.x<u.x?u.x=u.x-n:u.x=u.x+n):(h=n/(o/s),e.y<u.y?u.y=u.y-n:u.y=u.y+n,e.x<u.x?u.x=u.x-h:u.x=u.x+h),u.x,e.x,u.y,e.y,c.push(w({},u));return c}},{key:"randomOuterPoint",value:function(){var t=this.random(0,3),e=10*g.Block,n=this.random(-g.OffSetVertical,g.H+g.OffSetVertical),r=this.random(-g.OffSetHorizontal,g.W+g.OffSetHorizontal);return[{x:r,y:-g.OffSetVertical-e},{x:g.W+g.OffSetHorizontal+e,y:n},{x:r,y:g.H+g.OffSetVertical+e},{x:-g.OffSetHorizontal-e,y:n}][t]}},{key:"valueInMargin",value:function(t,e,n){return t>=e-n&&t<=e+n}},{key:"updateQtyList",value:function(t,e,n){var r=b(t);return r.map((function(t){return t.type})).includes(e)?r.map((function(t){return t.type===e&&(n?t.qty++:t.qty--),t})):[].concat(b(r),[{type:e,qty:1}])}},{key:"getNumberAscending",value:function(t,e){return t<e?t+1:e}}],(n=null)&&S(e.prototype,n),r&&S(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===_(o)?o:String(o)),r)}var i,o}var j=n(194),T=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="spr",this.y=t.y,this.x=t.x,this.h=t.h*g.Block,this.w=t.w*g.Block,this.fX=t.fX||0,this.fY=t.fY||0,this.fW=t.fW||this.w,this.fH=t.fH||this.h,this.fVertical=t.fVertical,this.target=t.target,this.r=t.r,t.id&&(this.id=t.id),t.sheet&&(this.sheet=t.sheet),t.metadata&&(this.metadata=t.metadata),t.loops&&(this.loops=t.loops,this.currentLoop=0),t.mini&&(this.mini=t.mini),t.fQty&&(this.fQty=t.fQty),t.hitsLimit&&(this.hitsLimit=t.hitsLimit),t.scaleX&&(this.scaleX=t.scaleX),t.scaleY&&(this.scaleY=-t.scaleY),this.sheet&&this.updateImage(),t.fixed&&(this.fixed=t.fixed)}var n,r,i;return n=e,(r=[{key:"updateImage",value:function(){var e=new Image;e.src=t+this.sheet+".png",this.img=e}},{key:"framing",value:function(){this.fVertical?this.fY=this.fCurrent*this.fH:this.fX=this.fCurrent*this.fW,this.fCurrent<this.fQty-1?this.fCurrent++:this.fCurrent=0}},{key:"flipVertically",value:function(t){1==Math.sign(t)?this.scaleY=-Math.abs(this.scaleY):this.scaleY=Math.abs(this.scaleY)}},{key:"flipHorizontally",value:function(t){1==Math.sign(t)?this.scaleX=-Math.abs(this.scaleX):this.scaleX=Math.abs(this.scaleX)}},{key:"colisionWith",value:function(t){var e=this;return t.find((function(t){return P.colision(t,e)}))}},{key:"draw",value:function(){this.fixed||this.positionByHero(),this.isVisible()?(this.fQty&&this.framing(),ctx.save(),ctx.translate(this.x,this.y),ctx.rotate(-this.r),ctx.scale(this.scaleX,this.scaleY),ctx.drawImage(this.img,this.fX,this.fY,this.fW,this.fH,0-this.w/2,0-this.h/2,this.w,this.h),ctx.restore()):this.mini&&this.drawMini(),this.tweenUpdate()}},{key:"tweenUpdate",value:function(){j.update()}},{key:"drawMini",value:function(){var t={x:0,y:0};this.x+this.w<0&&(t.x=0),this.x>g.VisibleArea.w&&(t.x=g.VisibleArea.w-this.w/4),this.x>=0&&this.x<=g.VisibleArea.w&&(t.x=this.x),this.y+this.y<0&&(t.y=0),this.y>g.VisibleArea.h&&(t.y=g.VisibleArea.h-this.w/4),this.y>=0&&this.y<=g.VisibleArea.h&&(t.y=this.y),ctx.drawImage(this.img,this.fX,this.fY,this.fW,this.fH,t.x,t.y,this.w/4,this.h/4)}},{key:"setPath",value:function(t){var e=this;this.currentPathIndex=0;var n={x:this.x,y:this.y},r={x:t.x,y:t.y};this.path=P.pathLinear(n,r,g.Speed),this.internalState={rotationInterval:0},this.internalState.rotationInterval=new j.Tween({r:this.r}).to({r:P.radiants(n,r)},550).easing(j.Easing.Cubic.Out).onUpdate((function(t){return e.r=t.r})).start()}},{key:"going",value:function(){var t=this.currentPathIndex;this.path&&this.path[t]?(this.currentPos=this.path[t],this.previousPos=this.path[t>0?t-1:t],this.moving=!0,this.x=this.path[t].x,this.y=this.path[t].y,this.currentPathIndex++):this.moving=!1}},{key:"hit",value:function(){this.hits||(this.hits=0),this.hits++}},{key:"looping",value:function(){this.currentLoop++}},{key:"fadeOut",value:function(){this.currentLoop<this.loops&&(this.y=this.y-2)}},{key:"positionByHero",value:function(){g.Hero.goingTop&&(this.y=this.y+g.Speed),g.Hero.goingRight&&(this.x=this.x-g.Speed),g.Hero.goingBottom&&(this.y=this.y-g.Speed),g.Hero.goingLeft&&(this.x=this.x+g.Speed)}},{key:"isVisible",value:function(){return P.colision(g.VisibleArea,{x:this.x-this.w,y:this.y-this.h,w:this.w+this.w,h:this.h+this.h})}}])&&k(n.prototype,r),i&&k(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}();function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==I(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===I(o)?o:String(o)),r)}var i,o}var H={engine:"engines.mp3",asteroidEmpty:"asteroidempty.mp3",miningclick:"asteroidempty.mp3",mineralFound:"mineralfound.mp3",pickoupcoin:"pickupcoin.mp3",powerup23:"powerup23.mp3",inventoryOpen:"inventory-open.mp3",clientBuy:"client-buy.mp3",clientNobuy:"client-nobuy.mp3",mineralSelect:"mineral-select.mp3",mineralUnselect:"mineral-unselect.mp3"},B=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,i;return n=t,i=[{key:"play",value:function(t){g.SoundOn&&new Audio(e+H[t]).play()}}],(r=null)&&M(n.prototype,r),i&&M(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}();function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==C(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===C(o)?o:String(o)),r)}var i,o}function R(t,e){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},R(t,e)}function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=L(t);if(e){var i=L(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function L(t){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},L(t)}var W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R(t,e)}(o,t);var e,n,r,i=A(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).text=t.text,e.color=t.color,e.colorLine=t.colorLine,e.size=t.size,e.align=t.align||"start",e}return e=o,r=[{key:"hiting",value:function(t,e,n,r,i){var s=new o({text:t,x:e,y:n,color:r,colorLine:i,size:32,loops:30});g.HitsLabels.push(s)}}],(n=[{key:"draw",value:function(){this.fadeOut(),ctx.font="".concat(this.size,"px ArcadeClassic"),ctx.fillStyle=this.color,ctx.textAlign="end",ctx.fillText(this.text,this.x,this.y),ctx.strokeStyle=this.colorLine,ctx.strokeText(this.text,this.x,this.y),this.looping()}}])&&E(e.prototype,n),r&&E(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(T);function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==X(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===X(o)?o:String(o)),r)}var i,o}function D(t,e){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},D(t,e)}function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=N(t);if(e){var i=N(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===X(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D(t,e)}(o,t);var e,n,r,i=V(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).x=g.W/2,e.y=g.H/2,e.sheet="ship",e.fX=0,e.fY=0,e.fW=72,e.fH=89,e.fQty=1,e.r=0,e.scaleX=1,e.scaleY=1,e.goingLeft=!1,e.goingRight=!1,e.goingTop=!1,e.goingBottom=!1,e.updateImage(),e.resetCargo(),e}return e=o,(n=[{key:"draw",value:function(){this.unloadCargo(),this.checkDirection(),this.going(),ctx.save(),ctx.translate(this.x,this.y),ctx.rotate(-this.r),ctx.scale(this.scaleX,this.scaleY),ctx.drawImage(this.img,this.fX,this.fY,this.fW,this.fH,0-this.w/2,0-this.h/2,this.w,this.h),this.cargoMinerals.forEach((function(t){ctx.drawImage(t.img,t.fX,t.fY,t.fW,t.fH,t.x,t.y,t.w,t.h)})),ctx.restore(),this.tweenUpdate()}},{key:"click",value:function(t){g.Inventory.showInventory||P.isHiting(t,g.UiPanel.controlsButton)||(P.isHiting(t,g.CurrentAsteroid)||B.play("engine"),this.setPath({x:t.x,y:t.y}))}},{key:"mining",value:function(t,e,n){this.xp+=t,g.XpTotal+=t,W.hiting(t.toString(),e,n,"blue","white")}},{key:"addCargoMineral",value:function(){this.xp+=8;var t=this.getCargoMineralsPosition(),e=y.find((function(t){return t.type===g.CurrentAsteroid.mineralType})),n={name:e.name,chance:e.chance,type:e.type},r=new T({metadata:n,fX:e.sheet.x,fY:e.sheet.y,fW:e.sheet.w,fH:e.sheet.h,sheet:e.sheet.img,x:t.x,y:t.y,w:this.w/g.Block/2,h:this.w/g.Block/2,r:P.random(0,360)});this.cargoMinerals.push(r),0===this.cargoMineralsPositions.length&&(this.cargoMineralsFull=!0)}},{key:"getCargoMineralsPosition",value:function(){return this.cargoMineralsPositions.pop()}},{key:"unloadCargo",value:function(){g.InCentral&&g.Hero.xp>0&&(B.play("powerup23"),W.hiting(g.Hero.xp.toString(),g.Hero.x,g.Hero.y,"blue","white"),g.XpTotal+=this.xp,this.cargoMinerals.forEach((function(t){g.MineralsHistory=P.updateQtyList(g.MineralsHistory,t.metadata.type,!0),g.MineralsStock=P.updateQtyList(g.MineralsStock,t.metadata.type,!0)})),this.resetCargo(),g.Inventory.updateStockMinerals())}},{key:"resetCargo",value:function(){this.xp=0,this.cargoMineralsFull=!1,this.cargoMinerals=[],this.cargoMineralsPositions=[{x:-this.w/7,y:-this.h/2},{x:-this.w/2.5,y:-this.h/2},{x:-this.w/7,y:-this.h/3},{x:-this.w/2.5,y:-this.h/3}]}},{key:"checkDirection",value:function(){this.currentPos&&(this.goingTop=this.currentPos.y<this.previousPos.y&&this.y<g.Margin&&g.Anchor.y+g.Anchor.h+g.Speed<g.LevelLimits.b,this.goingRight=this.currentPos.x>this.previousPos.x&&this.x>g.W-g.Margin&&g.Anchor.x-g.Speed>g.LevelLimits.l,this.goingBottom=this.currentPos.y>this.previousPos.y&&this.y+this.h>g.H-g.Margin&&g.Anchor.y-g.Speed>g.LevelLimits.t,this.goingLeft=this.currentPos.x<this.previousPos.x&&this.x<g.Margin&&g.Anchor.x+g.Anchor.w+g.Speed<g.LevelLimits.r)}}])&&Y(e.prototype,n),r&&Y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(T);function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==Q(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Q(o)?o:String(o)),r)}var i,o}function U(t,e){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},U(t,e)}function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=G(t);if(e){var i=G(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function G(t){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},G(t)}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U(t,e)}(o,t);var e,n,r,i=F(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).type="bkg",e}return e=o,(n=[{key:"draw",value:function(){this.fixed||this.positionByHero(),this.isVisible()&&ctx.drawImage(this.img,this.fX,this.fY,this.fW,this.fH,this.x,this.y,this.w,this.h)}},{key:"positionByHero",value:function(){g.BkgProportion=2,g.Hero.goingTop&&(this.y=this.y+g.Speed/g.BkgProportion),g.Hero.goingRight&&(this.x=this.x-g.Speed/g.BkgProportion),g.Hero.goingBottom&&(this.y=this.y-g.Speed/g.BkgProportion),g.Hero.goingLeft&&(this.x=this.x+g.Speed/g.BkgProportion)}}])&&z(e.prototype,n),r&&z(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(T);function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==$(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===$(o)?o:String(o)),r)}var i,o}function Z(t,e){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Z(t,e)}function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=et(t);if(e){var i=et(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function et(t){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},et(t)}var nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z(t,e)}(o,t);var e,n,r,i=tt(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).id="crosshair",e.fX=0,e.fY=0,e.fW=64,e.fH=64,e.sheet="crosshair",e.r=0,e.currentLoop=0,e.loops=3,e.updateImage(),e}return e=o,(n=[{key:"draw",value:function(){g.CurrentAsteroid&&(g.CurrentAsteroid.empty||(this.x=g.CurrentAsteroid.x,this.y=g.CurrentAsteroid.y,this.looping(),this.currentLoop===this.loops&&(this.r++,this.r=this.r>360?0:this.r++,this.currentLoop=0),ctx.save(),ctx.translate(this.x,this.y),ctx.rotate(this.r),ctx.drawImage(this.img,this.fX,this.fY,this.fW,this.fH,0-this.w/2,0-this.h/2,this.w,this.h),ctx.restore()))}}])&&J(e.prototype,n),r&&J(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(T);function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function it(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==rt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===rt(o)?o:String(o)),r)}var i,o}function ot(t,e){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ot(t,e)}function st(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=at(t);if(e){var i=at(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function at(t){return at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},at(t)}var ut=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ot(t,e)}(o,t);var e,n,r,i=st(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).color=t.color,e.alpha=t.alpha,e.w=t.w,e.h=t.h,e}return e=o,(n=[{key:"draw",value:function(){ctx.save(),ctx.fillStyle=this.color,ctx.fillRect(this.x,this.y,this.w,this.h),ctx.globalAlpha=this.alpha,ctx.restore()}}])&&it(e.prototype,n),r&&it(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(T);function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==ct(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ct(o)?o:String(o)),r)}var i,o}var ht=[{x:0,y:0,t:"A"},{x:7,y:0,t:"B"},{x:14,y:0,t:"C"},{x:21,y:0,t:"D"},{x:0,y:8,t:"E"},{x:7,y:8,t:"F"},{x:14,y:8,t:"G"},{x:21,y:8,t:"H"}],ft=[{x:0,y:0,t:"A"},{x:9,y:0,t:"B"},{x:0,y:8,t:"C"},{x:9,y:8,t:"D"},{x:0,y:16,t:"E"},{x:9,y:16,t:"F"},{x:0,y:24,t:"G"},{x:9,y:24,t:"H"}],yt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setPanel(),this.setTexts(),this.setStockMinerals(),this.setSaleMinerals(),this.setSoundButton()}var e,n,r;return e=t,(n=[{key:"setPanel",value:function(){this.panel=new K({w:50,h:80,fX:0,fY:0,fW:289,fH:381,sheet:l.inventoryPanel,fixed:!0}),this.panel.x=(g.W-this.panel.w)/2,this.panel.y=(g.H-this.panel.h)/2}},{key:"setTexts",value:function(){this.textStock=new W({text:"STOCK",x:this.panel.x+this.panel.w/2+this.panel.w/4,y:this.panel.y+3*g.Block,size:3*g.Block,color:"crimson",colorLine:"black",align:"center"}),this.textSale=new W({text:"ON SALE",x:this.panel.x+12*g.Block,y:this.panel.y+3*g.Block,size:3*g.Block,color:"crimson",colorLine:"black",align:"start"})}},{key:"setStockMinerals",value:function(){var t=this;this.slotsStock=ht.filter((function(e){return!!t.getMineralModel(e.t)})).map((function(e){var n=t.getMineralModel(e.t);return{type:e.t,qty:0,spriteImage:new K({fixed:!0,x:t.panel.x+t.panel.w/3+e.x*g.Block+2*g.Block,y:t.panel.y+3*g.Block+e.y*g.Block,w:6,h:6,sheet:n.sheet.img,fX:n.sheet.x,fY:n.sheet.y,fW:n.sheet.w,fH:n.sheet.h,fQty:n.sheet.fQty}),spriteText:new W({x:t.panel.x+t.panel.w/3+e.x*g.Block+8*g.Block,y:t.panel.y+3*g.Block+e.y*g.Block+7*g.Block,size:3*g.Block,color:"black",colorLine:"black",align:"end"})}}))}},{key:"setSaleMinerals",value:function(){var t=this;this.slotsSale=ft.filter((function(e){return!!t.getMineralModel(e.t)})).map((function(e){var n=t.getMineralModel(e.t);return{type:e.t,qty:0,spriteImage:new K({fixed:!0,x:t.panel.x+1*g.Block+e.x*g.Block,y:t.panel.y+3*g.Block+e.y*g.Block,w:6,h:6,sheet:n.sheet.img,fX:n.sheet.x,fY:n.sheet.y,fW:n.sheet.w,fH:n.sheet.h,fQty:n.sheet.fQty}),spriteText:new W({x:t.panel.x+5*g.Block+e.x*g.Block,y:t.panel.y+11*g.Block+e.y*g.Block,size:3*g.Block,color:"black",colorLine:"black",align:"center"})}}))}},{key:"getMineralModel",value:function(t){return y.find((function(e){return e.type===t}))}},{key:"updateStockMinerals",value:function(){this.slotsStock=this.slotsStock.map((function(t){var e=g.MineralsStock.find((function(e){return e.type===t.type}));return e&&(t.qty=e.qty,t.spriteText.text=e.qty),t})),this.slotsSale=this.slotsSale.map((function(t){var e=g.MineralsOnSale.find((function(e){return e.type===t.type}));return e&&(t.qty=e.qty,t.spriteText.text=e.qty),t}))}},{key:"setMineralTo",value:function(t,e){"sold"===t?g.MineralsOnSale=P.updateQtyList(g.MineralsOnSale,e,!1):(g.MineralsStock=P.updateQtyList(g.MineralsStock,e,"stock"===t),g.MineralsOnSale=P.updateQtyList(g.MineralsOnSale,e,"sale"===t)),this.updateStockMinerals()}},{key:"mineralSold",value:function(){this.slotsStock.filter((function(t){return t.qty>0})).length}},{key:"setSoundButton",value:function(){this.soundButton=new K({fixed:!0,w:4,h:4,fX:0,fY:0,fW:50,fH:47,fQty:1,sheet:l.sound}),this.soundButton.x=this.panel.x+this.panel.w-1.7*this.soundButton.w,this.soundButton.y=this.panel.y+this.panel.h-1.7*this.soundButton.h}},{key:"click",value:function(t){var e=this;g.Inventory.showInventory&&(this.slotsStock.forEach((function(n){P.isHiting(t,n.spriteImage)&&n.qty>0&&(B.play("mineralSelect"),e.setMineralTo("sale",n.type))})),this.slotsSale.forEach((function(n){P.isHiting(t,n.spriteImage)&&n.qty>0&&(B.play("mineralUnselect"),e.setMineralTo("stock",n.type))})),P.isHiting(t,this.soundButton)&&(g.SoundOn?(g.SoundOn=!1,this.soundButton.fY=47):(g.SoundOn=!0,this.soundButton.fY=0)))}},{key:"draw",value:function(){g.Inventory.showInventory&&(this.panel.draw(),this.textStock.draw(),this.textSale.draw(),this.slotsStock.filter((function(t){return t.qty>0})).forEach((function(t){t.spriteImage.draw(),t.spriteText.draw()})),this.slotsSale.filter((function(t){return t.qty>0})).forEach((function(t){t.spriteImage.draw(),t.spriteText.draw()})),this.soundButton.draw())}}])&&lt(e.prototype,n),r&&lt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==pt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===pt(o)?o:String(o)),r)}var i,o}var dt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fontSize=3*g.Block,this.create()}var e,n,r;return e=t,(n=[{key:"create",value:function(){this.setXp(),this.setMoney(),this.setControls()}},{key:"setControls",value:function(){this.controlsButton=new K({fixed:!0,w:8,h:8,fX:0,fY:0,fW:64,fH:64,fQty:1,sheet:l.controlsIcon}),this.controlsButton.x=g.W/2-this.controlsButton.w/2,this.controlsButton.y=g.H-1.5*this.controlsButton.h}},{key:"setXp",value:function(){this.xpPanel=new K({fixed:!0,w:18,h:3,fX:0,fY:0,fW:190,fH:49,fQty:1,sheet:l.ui}),this.xpPanel.x=g.W/2+g.W/10,this.xpPanel.y=this.xpPanel.h,this.xpIcon=new T({fixed:!0,w:3,h:3,fX:0,fY:0,fW:17,fH:18,fVertical:!1,sheet:l.xpIcon}),this.xpIcon.x=this.xpPanel.x+this.xpPanel.w-this.xpIcon.w/2,this.xpIcon.y=this.xpPanel.y+this.xpIcon.h/1.8,this.xpText=new W({x:this.xpPanel.x+this.xpPanel.w-this.xpIcon.w,y:this.xpPanel.y+2.4*g.Block,size:this.fontSize,color:"black",colorLine:"black",align:"end"})}},{key:"setMoney",value:function(){this.moneyPanel=new K({fixed:!0,w:18,h:3,fX:0,fY:0,fW:190,fH:49,fQty:1,sheet:l.ui}),this.moneyPanel.x=g.W/2-this.moneyPanel.w-g.W/10,this.moneyPanel.y=this.moneyPanel.h,this.moneyIcon=new T({fixed:!0,w:3,h:3,fX:0,fY:0,fW:17,fH:18,fVertical:!1,sheet:l.moneyIcon}),this.moneyIcon.x=this.moneyPanel.x+this.moneyPanel.w-this.moneyIcon.w/2,this.moneyIcon.y=this.moneyPanel.y+this.xpIcon.h/1.8,this.moneyText=new W({x:this.moneyPanel.x+this.moneyPanel.w-this.moneyIcon.w,y:this.moneyPanel.y+2.4*g.Block,size:this.fontSize,color:"black",colorLine:"black",align:"end"})}},{key:"click",value:function(t){P.isHiting(t,this.controlsButton)?(B.play("inventoryOpen"),g.Inventory.showInventory=!0):g.Inventory.showInventory&&!P.isHiting(t,g.Inventory.panel)&&(g.Inventory.showInventory=!1)}},{key:"draw",value:function(){this.xpText.text=P.getNumberAscending(Number(this.xpText.text),g.XpTotal).toString(),this.moneyText.text=P.getNumberAscending(Number(this.moneyText.text),g.MoneyTotal).toString(),this.xpPanel.draw(),this.xpIcon.draw(),this.xpText.draw(),this.moneyPanel.draw(),this.moneyIcon.draw(),this.moneyText.draw(),this.controlsButton.draw()}}])&&gt(e.prototype,n),r&&gt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==bt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===bt(o)?o:String(o)),r)}var i,o}function vt(t,e){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vt(t,e)}function wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xt(t);if(e){var i=xt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===bt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function xt(t){return xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xt(t)}var St=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vt(t,e)}(o,t);var e,n,r,i=wt(o);function o(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,t)}return e=o,r=[{key:"get",value:function(t){var e=p[P.random(0,p.length-1)];return new o({id:"explosion_".concat(P.random(0,1e5)),x:t.x,y:t.y,w:20,h:20,r:P.random(0,180),fX:e.x,fY:e.y,fW:e.w,fH:e.h,sheet:l.explosions,loops:5})}},{key:"add",value:function(t){g.Explosions.push(o.get(t))}}],(n=[{key:"draw",value:function(){var t=this;this.looping(),this.currentLoop===this.loops&&(this.currentLoop=0),ctx.save(),ctx.translate(this.x,this.y),ctx.rotate(this.r),ctx.drawImage(this.img,this.fX,this.fY,this.fW,this.fH,0-this.w/2,0-this.h/2,this.w,this.h),ctx.restore(),0===this.currentLoop&&(g.Explosions=g.Explosions.filter((function(e){return e.id!==t.id})))}}])&&mt(e.prototype,n),r&&mt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(T);function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function Pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _t(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(n),!0).forEach((function(e){kt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function kt(t,e,n){return(e=Tt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tt(r.key),r)}}function Tt(t){var e=function(t,e){if("object"!==Ot(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ot(e)?e:String(e)}function It(t,e){return It=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},It(t,e)}function Mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ht(t);if(e){var i=Ht(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Ht(t){return Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ht(t)}var Bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&It(t,e)}(o,t);var e,n,r,i=Mt(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).mineralType=t.mineralType,e.empty=!1,e}return e=o,r=[{key:"create",value:function(t){var e=this.getModel();return new o({id:"a"+t,x:e.x,y:e.y,w:e.w,h:e.h,sheet:e.sheet.img,fX:e.sheet.x,fY:e.sheet.y,fW:e.sheet.w,fH:e.sheet.h,fQty:e.sheet.fQty,r:P.radiants(void 0,void 0,180*Math.random()),hitsLimit:9,mineralType:this.getRandomMineralType()})}},{key:"createGroup",value:function(t){for(var e=0;e<t;e++)g.Asteroids.push(this.create(e.toString()))}},{key:"getRandomMineralType",value:function(){var t=P.random(1,100);return y.find((function(e){return t>=e.chance[0]&&t<=e.chance[1]})).type}},{key:"getModel",value:function(){var t=f[P.random(0,f.length-1)],e=_t(_t({},t),{},{x:P.random(-g.OffSetHorizontal+t.w/2,g.W+g.OffSetHorizontal-t.w/2),y:P.random(-g.OffSetVertical+t.h/2,g.OffSetVertical+g.H-t.h/2)}),n=_t(_t({},e),{},{w:e.w*g.Block,h:e.h*g.Block}),r=P.colision(n,g.CenterVoid),i=g.Asteroids.some((function(t){return P.colision(t,n)}));return r||i?this.getModel():e}}],(n=[{key:"click",value:function(t){if(!g.Hero.cargoMineralsFull&&!g.CurrentAsteroid.empty&&g.CurrentAsteroid.isClickIn(t))switch(this.hit(),this.hits){case 3:St.add({x:this.x,y:this.y}),this.heroMining(3);break;case 6:St.add({x:this.x,y:this.y}),this.heroMining(5);break;case this.hitsLimit:St.add({x:this.x,y:this.y}),this.setEmpty(),g.Hero.addCargoMineral();break;default:B.play("miningclick")}}},{key:"heroMining",value:function(t){g.Hero.mining(t,this.x,this.y)}},{key:"setEmpty",value:function(){B.play("asteroidEmpty"),this.empty=!0,this.sheet="a-empty",this.updateImage()}},{key:"isClickIn",value:function(t){return P.isHiting(t,this)}}])&&jt(e.prototype,n),r&&jt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(T);function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function Et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function At(t,e,n){return(e=Wt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wt(r.key),r)}}function Wt(t){var e=function(t,e){if("object"!==Ct(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ct(e)?e:String(e)}function Xt(t,e){return Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xt(t,e)}function Yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dt(t);if(e){var i=Dt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Dt(t){return Dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dt(t)}var Vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xt(t,e)}(o,t);var e,n,r,i=Yt(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).period=t.period,e.timeShopping=t.timeShopping,e.destiny={x:g.Central.x,y:g.Central.y},e.r=0,e.scaleX=1,e.scaleY=1,e.path=[],e.pathBlocked=!1,e.isOutside=!1,e.isInCentral=!1,e.origin=P.randomOuterPoint(),e.x=e.origin.x,e.y=e.origin.y,e}return e=o,r=[{key:"checkIfIsIn",value:function(){g.Clients.length!==h.length&&h.forEach((function(t){g.XpTotal>=t.requiredXp&&(g.Clients.find((function(e){return t.id===e.id}))||g.Clients.push(new o({id:t.id,h:6,w:6,period:t.period,timeShopping:t.timeShopping,sheet:t.sheet.img,fX:t.sheet.x,fY:t.sheet.y,fQty:t.sheet.fQty,fH:t.sheet.h,fW:t.sheet.w})))}))}}],(n=[{key:"pathByHero",value:function(){g.Hero.goingTop&&(this.y=this.y+g.Speed,this.path=this.path.map((function(t){return Rt(Rt({},t),{},{y:t.y+g.Speed})}))),g.Hero.goingRight&&(this.x=this.x-g.Speed,this.path=this.path.map((function(t){return Rt(Rt({},t),{},{x:t.x-g.Speed})}))),g.Hero.goingBottom&&(this.y=this.y-g.Speed,this.path=this.path.map((function(t){return Rt(Rt({},t),{},{y:t.y-g.Speed})}))),g.Hero.goingLeft&&(this.x=this.x+g.Speed,this.path=this.path.map((function(t){return Rt(Rt({},t),{},{x:t.x+g.Speed})})))}},{key:"checkPath",value:function(){if(this.isOutside=this.x<-g.OffSetHorizontal||this.x>g.W+g.OffSetHorizontal||this.y<-g.OffSetVertical||this.y>g.H+g.OffSetVertical,this.isInCentral=P.valueInMargin(this.x,g.Central.x,10)&&P.valueInMargin(this.x,g.Central.x,10),this.path.length>0&&this.currentPathIndex===this.path.length&&(this.path=[],this.currentPathIndex=0,this.pathBlocked=!1),this.isOutside){if(this.pathBlocked)return;g.GlobalTime%this.period==0&&(this.x=this.origin.x,this.y=this.origin.y,this.setPath(g.Central),this.pathBlocked=!0)}if(this.isOutside||this.isInCentral||(this.pathBlocked=!1),this.isInCentral){if(this.pathBlocked)return;this.timeArrivalCentral?g.GlobalTime>this.timeArrivalCentral&&(g.GlobalTime-this.timeArrivalCentral)%this.timeShopping==0&&(this.buyMineral(),this.setPath(this.origin),this.pathBlocked=!0,this.origin=P.randomOuterPoint()):this.timeArrivalCentral=g.GlobalTime}}},{key:"buyMineral",value:function(){var t=this;if(g.MineralsOnSale.filter((function(t){return t.qty>0})).length>0){this.mineralTypeBought=g.MineralsOnSale[P.random(0,g.MineralsOnSale.length-1)].type,g.Inventory.setMineralTo("sold",this.mineralTypeBought);var e=y.find((function(e){return e.type===t.mineralTypeBought}));this.mineralCargo=new T({metadata:e,fX:e.sheet.x,fY:e.sheet.y,fW:e.sheet.w,fH:e.sheet.h,sheet:e.sheet.img,x:this.x,y:this.y,w:this.w/g.Block,h:this.w/g.Block,r:P.random(0,360)});var n=g.MineralsPrices.find((function(e){return e.type===t.mineralTypeBought})).price;g.MoneyTotal+=n,W.hiting(n.toString(),this.x,this.y,"gold","white"),B.play("clientBuy")}else console.log("NOTHING TO BUY! :("),B.play("clientNobuy")}},{key:"draw",value:function(){if(this.going(),this.checkPath(),this.pathByHero(),this.isOutside)this.mineralCargo=null;else if(this.isVisible()){ctx.save(),ctx.translate(this.x,this.y),ctx.rotate(-this.r),ctx.scale(this.scaleX,this.scaleY),ctx.drawImage(this.img,this.fX,this.fY,this.fW,this.fH,0-this.w/2,0-this.h/2,this.w,this.h);var t=this.mineralCargo;t&&ctx.drawImage(t.img,t.fX,t.fY,t.fW,t.fH,0-this.w/2,0-this.h/2,t.w,t.h),ctx.restore(),this.tweenUpdate()}else this.drawMini()}}])&&Lt(e.prototype,n),r&&Lt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(T);function Nt(t){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nt(t)}function qt(t){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qt(t)}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==qt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===qt(o)?o:String(o)),r)}var i,o}var zt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.Asteroids=[],this.BkgProportion=4,this.CargoTotal=0,this.CurrentScreen="levelStart",this.Explosions=[],this.GlobalTime=0,this.GameOver=!1,this.H=window.innerHeight,this.HitsLabels=[],this.InCentral=!1,this.MarkTime=0,this.Margin=100,this.MineralsStock=[],this.MineralsOnSale=[],this.MineralsPrices=[],this.MineralsHistory=[],this.MoneyTotal=0,this.Pause=!1,this.Stars=[],this.SetNewGame=!0,this.SoundOn=!0,this.Speed=10,this.XpTotal=0,this.W=window.innerWidth,this.setDevice()}var e,n,r;return e=t,(n=[{key:"setDevice",value:function(){this.W<500||this.H<500?(this.Device="mobile",this.Block=o,this.OffSetHorizontal=this.W*s,this.OffSetVertical=this.H*a,this.CenterVoid={x:0,y:this.H/2-this.H/4,w:this.W,h:this.H/2}):(this.Device="desktop",this.Block=i,this.OffSetHorizontal=this.W*u,this.OffSetVertical=this.H*c,this.CenterVoid={x:this.W/2-this.W/4,y:this.H/2-this.H/4,w:this.W/2,h:this.H/2})}}])&&Qt(e.prototype,n),r&&Qt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Ut=document.getElementById("canvas");function Ft(){switch(ctx.clearRect(0,0,g.W,g.H),g.CurrentScreen){case"levelStart":g.LevelLimits={t:-g.OffSetVertical,r:g.W+g.OffSetHorizontal,b:g.H+g.OffSetVertical,l:-g.OffSetHorizontal},g.SetNewGame&&(g.GameOver=!1,g.SetNewGame=!1,g.Background=new ut({x:0,y:0,w:g.W,h:g.H,color:"#2c2137",alpha:1}),g.Anchor=new T({id:"anchor",x:0,y:0,w:g.W/g.Block,h:g.H/g.Block}),g.VisibleArea=new ut({id:"visiblArea",x:0,y:0,w:g.W,h:g.H}),g.Stars=Array.from({length:1e3},(function(t,e){return new K({x:P.random(g.LevelLimits.l,g.LevelLimits.r),y:P.random(g.LevelLimits.t,g.LevelLimits.b),w:4,h:4,fX:50*P.random(0,4),fY:50*P.random(0,4),fW:50,fH:50,fQty:1,sheet:l.stars})})),Bt.createGroup(200),g.Central=new T({w:10,h:10,x:g.W/2,y:g.H/2,sheet:l.central,fX:0,fY:0,fW:91,fH:90,r:20,scaleX:2,scaleY:2,mini:!0}),g.Hero=new q({h:10,w:8}),g.Hero.target={x:g.Hero.x,y:g.Hero.y},g.Clients=[],g.Crosshair=new nt({w:8,h:8}),g.Inventory=new yt,g.UiPanel=new dt),g.CurrentScreen="action",g.MarkTime=0,g.GlobalTime=0,g.MineralsPrices=[{type:"A",price:5},{type:"B",price:10},{type:"C",price:20},{type:"D",price:50},{type:"E",price:60},{type:"F",price:70},{type:"G",price:80},{type:"H",price:90},{type:"I",price:100}],document.body.addEventListener("click",(function(t){var e;g.Hero.click(t),null===(e=g.CurrentAsteroid)||void 0===e||e.click(t),g.UiPanel.click(t),g.Inventory.click(t)})),P.randomOuterPoint();break;case"action":Vt.checkIfIsIn(),g.CurrentAsteroid=g.Hero.colisionWith(g.Asteroids),g.InCentral="object"===Nt(g.Hero.colisionWith([g.Central])),g.Anchor.positionByHero(),g.Background.draw(),g.Stars.forEach((function(t){return t.draw()})),g.Asteroids.forEach((function(t){return t.draw()})),g.Explosions.forEach((function(t){return t.draw()})),g.Clients.forEach((function(t){return t.draw()})),g.Crosshair.draw(),g.Central.draw(),g.Hero.draw(),g.HitsLabels.forEach((function(t){return t.draw()})),g.HitsLabels=g.HitsLabels.filter((function(t){return t.currentLoop<t.loops})),g.Inventory.draw(),g.UiPanel.draw()}}globalThis.g=new zt,globalThis.ctx=Ut.getContext("2d"),Ut.width=g.W,Ut.height=g.H,setInterval((function(){g.GlobalTime=g.GlobalTime+.5}),500);setInterval(Ft,r)})()})();