(()=>{"use strict";var t={194:(t,e,r)=>{r.r(e),r.d(e,{Easing:()=>i,Group:()=>a,Interpolation:()=>s,Sequence:()=>u,Tween:()=>l,VERSION:()=>f,add:()=>g,default:()=>v,getAll:()=>p,nextId:()=>h,now:()=>o,remove:()=>d,removeAll:()=>m,update:()=>b});var n,i={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-i.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*i.Bounce.In(2*t):.5*i.Bounce.Out(2*t-1)+.5}}},o="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},a=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map((function(e){return t._tweens[e]}))},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},t.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},t.prototype.update=function(t,e){void 0===t&&(t=o()),void 0===e&&(e=!1);var r=Object.keys(this._tweens);if(0===r.length)return!1;for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<r.length;n++){var i=this._tweens[r[n]],a=!e;i&&!1===i.update(t,a)&&!e&&delete this._tweens[r[n]]}r=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}(),s={Linear:function(t,e){var r=t.length-1,n=r*e,i=Math.floor(n),o=s.Utils.Linear;return e<0?o(t[0],t[1],n):e>1?o(t[r],t[r-1],r-n):o(t[i],t[i+1>r?r:i+1],n-i)},Bezier:function(t,e){for(var r=0,n=t.length-1,i=Math.pow,o=s.Utils.Bernstein,a=0;a<=n;a++)r+=i(1-e,n-a)*i(e,a)*t[a]*o(n,a);return r},CatmullRom:function(t,e){var r=t.length-1,n=r*e,i=Math.floor(n),o=s.Utils.CatmullRom;return t[0]===t[r]?(e<0&&(i=Math.floor(n=r*(1+e))),o(t[(i-1+r)%r],t[i],t[(i+1)%r],t[(i+2)%r],n-i)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[r]-(o(t[r],t[r],t[r-1],t[r-1],n-r)-t[r]):o(t[i?i-1:0],t[i],t[r<i+1?r:i+1],t[r<i+2?r:i+2],n-i)},Utils:{Linear:function(t,e,r){return(e-t)*r+t},Bernstein:function(t,e){var r=s.Utils.Factorial;return r(t)/r(e)/r(t-e)},Factorial:(n=[1],function(t){var e=1;if(n[t])return n[t];for(var r=t;r>1;r--)e*=r;return n[t]=e,e}),CatmullRom:function(t,e,r,n,i){var o=.5*(r-t),a=.5*(n-e),s=i*i;return(2*e-2*r+o+a)*(i*s)+(-3*e+3*r-2*o-a)*s+o*i+e}}},u=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),c=new a,l=function(){function t(t,e){void 0===e&&(e=c),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=i.Linear.None,this._interpolationFunction=s.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=u.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.to=function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},t.prototype.duration=function(t){return this._duration=t,this},t.prototype.start=function(t){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var e in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==t?"string"==typeof t?o()+parseFloat(t):t:o(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},t.prototype._setupProperties=function(t,e,r,n){for(var i in r){var o=t[i],a=Array.isArray(o),s=a?"array":typeof o,u=!a&&Array.isArray(r[i]);if("undefined"!==s&&"function"!==s){if(u){var c=r[i];if(0===c.length)continue;c=c.map(this._handleRelativeValue.bind(this,o)),r[i]=[o].concat(c)}if("object"!==s&&!a||!o||u)void 0===e[i]&&(e[i]=o),a||(e[i]*=1),n[i]=u?r[i].slice().reverse():e[i]||0;else{for(var l in e[i]=a?[]:{},o)e[i][l]=o[l];n[i]=a?[]:{},this._setupProperties(o,e[i],r[i],n[i])}}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(t){return void 0===t&&(t=o()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this)),this},t.prototype.resume=function(t){return void 0===t&&(t=o()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},t.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},t.prototype.group=function(t){return this._group=t,this},t.prototype.delay=function(t){return this._delayTime=t,this},t.prototype.repeat=function(t){return this._initialRepeat=t,this._repeat=t,this},t.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},t.prototype.yoyo=function(t){return this._yoyo=t,this},t.prototype.easing=function(t){return this._easingFunction=t,this},t.prototype.interpolation=function(t){return this._interpolationFunction=t,this},t.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},t.prototype.onStart=function(t){return this._onStartCallback=t,this},t.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},t.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},t.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},t.prototype.onStop=function(t){return this._onStopCallback=t,this},t.prototype.update=function(t,e){if(void 0===t&&(t=o()),void 0===e&&(e=!0),this._isPaused)return!0;var r,n,i=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>i)return!1;e&&this.start(t)}if(this._goToEnd=!1,t<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=0===this._duration||n>1?1:n;var a=this._easingFunction(n);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,a),this._onUpdateCallback&&this._onUpdateCallback(this._object,n),1===n){if(this._repeat>0){for(r in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[r]||(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(this._valuesEnd[r])),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,u=this._chainedTweens.length;s<u;s++)this._chainedTweens[s].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(t,e,r,n){for(var i in r)if(void 0!==e[i]){var o=e[i]||0,a=r[i],s=Array.isArray(t[i]),u=Array.isArray(a);!s&&u?t[i]=this._interpolationFunction(a,n):"object"==typeof a&&a?this._updateProperties(t[i],o,a,n):"number"==typeof(a=this._handleRelativeValue(o,a))&&(t[i]=o+(a-o)*n)}},t.prototype._handleRelativeValue=function(t,e){return"string"!=typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?t+parseFloat(e):parseFloat(e)},t.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],r=this._valuesEnd[t];this._valuesStartRepeat[t]="string"==typeof r?this._valuesStartRepeat[t]+parseFloat(r):this._valuesEnd[t],this._valuesEnd[t]=e},t}(),f="18.6.4",h=u.nextId,y=c,p=y.getAll.bind(y),m=y.removeAll.bind(y),g=y.add.bind(y),d=y.remove.bind(y),b=y.update.bind(y);const v={Easing:i,Group:a,Interpolation:s,now:o,Sequence:u,nextId:h,Tween:l,VERSION:f,getAll:p,removeAll:m,add:g,remove:d,update:b}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t="./assets/sprites/",e="./assets/sounds/",n=45,i=8,o=6,a=2,s=2,u=2,c=2,l=[{x:0,y:0,w:15,h:13,sheet:{x:0,y:0,w:121,h:105,image:"a1.png",frameTotal:1}},{x:0,y:0,w:12,h:12,sheet:{x:0,y:0,w:96,h:96,image:"a2.png",frameTotal:1}},{x:0,y:0,w:13,h:11,sheet:{x:0,y:0,w:104,h:88,image:"a3.png",frameTotal:1}}],f=[{type:"A",name:"A",chance:[1,50],sheet:{image:"asteroid-samples.png",x:0,y:0,w:32,h:32,frameTotal:1}},{type:"B",name:"B",chance:[51,75],sheet:{image:"asteroid-samples.png",x:0,y:32,w:32,h:32,frameTotal:1}},{type:"C",name:"C",chance:[76,90],sheet:{image:"asteroid-samples.png",x:0,y:64,w:32,h:32,frameTotal:1}},{type:"D",name:"D",chance:[91,100],sheet:{image:"asteroid-samples.png",x:0,y:96,w:32,h:32,frameTotal:1}}],h={engine:"engines.wav",miningclick:"miningclick.wav",asteroidEmpty:"asteroidempty.wav",mineralFound:"mineralfound.wav",pickoupcoin:"pickupcoin.wav",powerup23:"powerup23.wav"};function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return(e=v(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function v(t){var e=function(t,e){if("object"!==y(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===y(e)?e:String(e)}var w=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"random",value:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},{key:"colision",value:function(t,e){return t.x+t.w>e.x&&t.y+t.h>e.y&&t.x<e.x+e.w&&t.y<e.y+e.h}},{key:"isHiting",value:function(t,e){if(e){if("sprite"===e.type)return t.x>=e.x-e.w/2&&t.x<=e.x+e.w+e.w/2&&t.y>=e.y-e.h/2&&t.y<=e.y+e.w+e.h/2;if("background"===e.type)return t.x>=e.x&&t.x<=e.x+e.w&&t.y>=e.y&&t.y<=e.y+e.h}return!1}},{key:"toRadiants",value:function(t){return t*(Math.PI/180)}},{key:"radiants",value:function(e,r,n){if(r){var i=e.x-r.x,o=e.y-r.y;return Math.atan2(i,o)}if(n)return t.toRadiants(n)}},{key:"pathLinear",value:function(t,e,r){for(var n=e.x-t.x,i=e.y-t.y,o=Math.floor(Math.abs(i/r)),a=Math.floor(Math.abs(n/r)),s=a>o,u={x:t.x,y:t.y},c=[],l=s?a:o,f=r/(a/o),h=r/(o/a),y=0;y<l;y++)s?(e.y<u.y?u.y=u.y-f:u.y=u.y+f,e.x<u.x?u.x=u.x-r:u.x=u.x+r):(e.y<u.y?u.y=u.y-r:u.y=u.y+r,e.x<u.x?u.x=u.x-h:u.x=u.x+h),c.push(m({},u));return c}}],(r=null)&&b(e.prototype,r),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==x(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===x(o)?o:String(o)),n)}var i,o}var S=r(194),P=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="sprite",this.id=t.id,this.y=t.y,this.x=t.x,this.h=t.h*g.Block,this.w=t.w*g.Block,this.frameX=t.frameX||0,this.frameY=t.frameY||0,this.frameW=t.frameW||this.w,this.frameH=t.frameH||this.h,this.frameVertical=t.frameDirection,this.target=t.target,this.r=t.r,this.sheet=t.sheet,this.frameTotal=t.frameTotal||1,this.frameCurrent=0,this.path=[],this.currentPathPosition=0,this.currentPosition=void 0,this.previousPosition=void 0,this.hits=0,this.hitsLimit=t.hitsLimit?t.hitsLimit:1,this.loops=t.loops,this.currentLoop=0,this.scaleX=t.scaleX||1,this.scaleY=-t.scaleY||1,this.moving=!1,this.mini=t.mini||!1,this.metadata=t.metadata,this.sheet&&this.updateImage(),this.internalState={rotationInterval:void 0},this.fixed=t.fixed||!1}var r,n,i;return r=e,(n=[{key:"updateImage",value:function(){var e=new Image;e.src=t+this.sheet,this.image=e}},{key:"framing",value:function(){this.frameVertical?this.frameY=this.frameCurrent*this.frameH:this.frameX=this.frameCurrent*this.frameW,this.frameCurrent<this.frameTotal-1?this.frameCurrent++:this.frameCurrent=0}},{key:"flipVertically",value:function(t){1==Math.sign(t)?this.scaleY=-Math.abs(this.scaleY):this.scaleY=Math.abs(this.scaleY)}},{key:"flipHorizontally",value:function(t){1==Math.sign(t)?this.scaleX=-Math.abs(this.scaleX):this.scaleX=Math.abs(this.scaleX)}},{key:"colisionWith",value:function(t){var e=this;return t.find((function(t){return w.colision(t,e)}))}},{key:"draw",value:function(){this.fixed||this.positionByHero(),this.isVisible()?(this.framing(),ctx.save(),ctx.translate(this.x,this.y),ctx.rotate(-this.r),ctx.scale(this.scaleX,this.scaleY),ctx.drawImage(this.image,this.frameX,this.frameY,this.frameW,this.frameH,0-this.w/2,0-this.h/2,this.w,this.h),ctx.restore()):this.mini&&this.drawMini(),this.tweenUpdate()}},{key:"tweenUpdate",value:function(){S.update()}},{key:"drawMini",value:function(){var t={x:0,y:0};this.x+this.w<0&&(t.x=0),this.x>g.VisibleArea.w&&(t.x=g.VisibleArea.w-this.w/4),this.x>=0&&this.x<=g.VisibleArea.w&&(t.x=this.x),this.y+this.y<0&&(t.y=0),this.y>g.VisibleArea.h&&(t.y=g.VisibleArea.h-this.w/4),this.y>=0&&this.y<=g.VisibleArea.h&&(t.y=this.y),ctx.drawImage(this.image,this.frameX,this.frameY,this.frameW,this.frameH,t.x,t.y,this.w/4,this.h/4)}},{key:"setPath",value:function(t){var e=this;this.currentPathPosition=0;var r={x:this.x,y:this.y},n={x:t.x,y:t.y};this.path=w.pathLinear(r,n,g.Speed),this.internalState.rotationInterval=new S.Tween({r:this.r}).to({r:w.radiants(r,n)},550).easing(S.Easing.Cubic.Out).onUpdate((function(t){return e.r=t.r})).start()}},{key:"going",value:function(){var t=this.currentPathPosition;this.path[t]?(this.currentPosition=this.path[t],this.previousPosition=this.path[t>0?t-1:t],this.moving=!0,this.x=this.path[t].x,this.y=this.path[t].y,this.currentPathPosition++):this.moving=!1}},{key:"hit",value:function(){this.hits++}},{key:"looping",value:function(){this.currentLoop++}},{key:"fadeOut",value:function(){this.currentLoop<this.loops&&(this.y=this.y-2)}},{key:"positionByHero",value:function(){g.Hero.goingTop&&(this.y=this.y+g.Speed),g.Hero.goingRight&&(this.x=this.x-g.Speed),g.Hero.goingBottom&&(this.y=this.y-g.Speed),g.Hero.goingLeft&&(this.x=this.x+g.Speed)}},{key:"isVisible",value:function(){return w.colision(g.VisibleArea,{x:this.x-this.w,y:this.y-this.h,w:this.w+this.w,h:this.h+this.h})}}])&&_(r.prototype,n),i&&_(r,i),Object.defineProperty(r,"prototype",{writable:!1}),e}();function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==O(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===O(o)?o:String(o)),n)}var i,o}var j=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,n,i;return r=t,i=[{key:"play",value:function(t){new Audio(e+h[t]).play()}}],(n=null)&&k(r.prototype,n),i&&k(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}();function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==T(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===T(o)?o:String(o)),n)}var i,o}function I(t,e){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},I(t,e)}function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=M(t);if(e){var i=M(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}var E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I(t,e)}(o,t);var e,r,n,i=H(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).text=t.text,e.color=t.color,e.colorLine=t.colorLine,e.size=t.size,e.align=t.align||"start",e}return e=o,n=[{key:"hiting",value:function(t,e,r,n){var i=new o({id:t,text:"+"+e,x:r,y:n,color:"white",colorLine:"black",size:32,loops:30});g.HitsLabels.push(i)}}],(r=[{key:"draw",value:function(){this.fadeOut(),ctx.font="".concat(this.size,"px ArcadeClassic"),ctx.fillStyle=this.color,ctx.textAlign="end",ctx.fillText(this.text,this.x,this.y),ctx.strokeStyle=this.colorLine,ctx.strokeText(this.text,this.x,this.y),this.looping()}}])&&C(e.prototype,r),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(P);function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==R(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===R(o)?o:String(o)),n)}var i,o}function B(t,e){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B(t,e)}function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=W(t);if(e){var i=W(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function W(t){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},W(t)}var X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}(o,t);var e,r,n,i=L(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).goingLeft=!1,e.goingRight=!1,e.goingTop=!1,e.goingBottom=!1,e.resetCargo(),e}return e=o,(r=[{key:"draw",value:function(){this.checkDirection(),this.going(),ctx.save(),ctx.translate(this.x,this.y),ctx.rotate(-this.r),ctx.scale(this.scaleX,this.scaleY),ctx.drawImage(this.image,this.frameX,this.frameY,this.frameW,this.frameH,0-this.w/2,0-this.h/2,this.w,this.h),this.cargoMinerals.forEach((function(t){ctx.drawImage(t.image,t.frameX,t.frameY,t.frameW,t.frameH,t.x,t.y,t.w,t.h)})),ctx.restore(),this.tweenUpdate()}},{key:"click",value:function(t){g.Inventory.showInventory||w.isHiting(t,g.UiPanel.controlsButton)||(w.isHiting(t,g.CurrentAsteroid)||j.play("engine"),this.setPath({x:t.x,y:t.y}))}},{key:"mining",value:function(t,e,r,n){this.xp+=t,g.XpTotal+=t,E.hiting("hit_"+e,t,r,n)}},{key:"addCargoMineral",value:function(){this.xp+=8;var t=this.getCargoMineralsPosition(),e=g.CurrentAsteroid.mineral,r={name:e.name,chance:e.chance,type:e.type},n=new P({id:"cargo-"+g.CurrentAsteroid.id,metadata:r,frameX:e.sheet.x,frameY:e.sheet.y,frameW:e.sheet.w,frameH:e.sheet.h,sheet:e.sheet.image,x:t.x,y:t.y,w:this.w/g.Block/2,h:this.w/g.Block/2});this.cargoMinerals.push(n),0===this.cargoMineralsPositions.length&&(this.cargoMineralsFull=!0)}},{key:"getCargoMineralsPosition",value:function(){return this.cargoMineralsPositions.pop()}},{key:"unloadCargo",value:function(){g.InCentral&&g.Hero.xp>0&&(j.play("powerup23"),E.hiting("hit_central",g.Hero.xp,g.Hero.x,g.Hero.y),g.XpTotal+=this.xp,this.cargoMinerals.forEach((function(t){return g.MineralsTotal.push(t.metadata.type)})),this.resetCargo(),g.Inventory.updateMinerals())}},{key:"resetCargo",value:function(){this.xp=0,this.cargoMineralsFull=!1,this.cargoMinerals=[],this.cargoMineralsPositions=[{x:0,y:0},{x:0,y:0-this.w/2},{x:0-this.w/2,y:0},{x:0-this.w/2,y:0-this.w/2}]}},{key:"checkDirection",value:function(){this.currentPosition&&(this.goingTop=this.currentPosition.y<this.previousPosition.y&&this.y<g.Margin&&g.Anchor.y+g.Anchor.h+g.Speed<g.LevelLimits.b,this.goingRight=this.currentPosition.x>this.previousPosition.x&&this.x>g.W-g.Margin&&g.Anchor.x-g.Speed>g.LevelLimits.l,this.goingBottom=this.currentPosition.y>this.previousPosition.y&&this.y+this.h>g.H-g.Margin&&g.Anchor.y-g.Speed>g.LevelLimits.t,this.goingLeft=this.currentPosition.x<this.previousPosition.x&&this.x<g.Margin&&g.Anchor.x+g.Anchor.w+g.Speed<g.LevelLimits.r)}}])&&A(e.prototype,r),n&&A(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(P);function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function V(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==D(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===D(o)?o:String(o)),n)}var i,o}function Y(t,e){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Y(t,e)}function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=N(t);if(e){var i=N(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===D(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}var U=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y(t,e)}(o,t);var e,r,n,i=F(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).type="background",e}return e=o,(r=[{key:"draw",value:function(){this.fixed||this.positionByHero(),this.isVisible()&&ctx.drawImage(this.image,this.frameX,this.frameY,this.frameW,this.frameH,this.x,this.y,this.w,this.h)}},{key:"positionByHero",value:function(){g.BkgProportion=2,g.Hero.goingTop&&(this.y=this.y+g.Speed/g.BkgProportion),g.Hero.goingRight&&(this.x=this.x-g.Speed/g.BkgProportion),g.Hero.goingBottom&&(this.y=this.y-g.Speed/g.BkgProportion),g.Hero.goingLeft&&(this.x=this.x+g.Speed/g.BkgProportion)}}])&&V(e.prototype,r),n&&V(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(P);function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==z(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===z(o)?o:String(o)),n)}var i,o}function G(t,e){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},G(t,e)}function Q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=J(t);if(e){var i=J(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function J(t){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},J(t)}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G(t,e)}(o,t);var e,r,n,i=Q(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).mineral=t.mineral,e.empty=!1,e}return e=o,(r=[{key:"click",value:function(t){if(!g.Hero.cargoMineralsFull&&!g.CurrentAsteroid.empty&&g.CurrentAsteroid.mineral&&g.CurrentAsteroid.isClickIn(t)){switch(this.hit(),this.hits){case 3:this.modelNew=0,g.Hero.mining(3,this.id,this.x,this.y),j.play("pickoupcoin");break;case 6:this.modelNew=1,g.Hero.mining(5,this.id,this.x,this.y),j.play("pickoupcoin");break;default:j.play("miningclick")}this.hits===this.hitsLimit&&(this.setEmpty(),g.Hero.addCargoMineral())}}},{key:"setEmpty",value:function(){j.play("asteroidEmpty"),this.empty=!0,this.sheet="a-empty.png",this.updateImage()}},{key:"isClickIn",value:function(t){return w.isHiting(t,this)}}])&&q(e.prototype,r),n&&q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(P);function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function $(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function tt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$(Object(r),!0).forEach((function(e){et(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function et(t,e,r){return(e=nt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nt(n.key),n)}}function nt(t){var e=function(t,e){if("object"!==Z(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Z(e)?e:String(e)}var it=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"create",value:function(t){var e=this.getModel();return new K({id:"asteroid_"+t,x:e.x,y:e.y,w:e.w,h:e.h,sheet:e.sheet.image,frameX:e.sheet.x,frameY:e.sheet.y,frameW:e.sheet.w,frameH:e.sheet.h,frameTotal:e.sheet.frameTotal,r:w.radiants(void 0,void 0,180*Math.random()),hitsLimit:9,mineral:this.getRandomMineral()})}},{key:"createGroup",value:function(){for(var t=0;t<g.AsteroidsNumber;t++)g.Asteroids.push(this.create(t.toString()))}},{key:"getRandomMineral",value:function(){var t=w.random(1,100);return f.find((function(e){return t>=e.chance[0]&&t<=e.chance[1]}))}},{key:"getModel",value:function(){var t=l[w.random(0,l.length-1)],e=tt(tt({},t),{},{x:w.random(-g.OffSetHorizontal+t.w/2,g.W+g.OffSetHorizontal-t.w/2),y:w.random(-g.OffSetVertical+t.h/2,g.OffSetVertical+g.H-t.h/2)}),r=tt(tt({},e),{},{w:e.w*g.Block,h:e.h*g.Block}),n=w.colision(r,g.CenterVoid),i=g.Asteroids.some((function(t){return w.colision(t,r)}));return n||i?this.getModel():e}}],(r=null)&&rt(e.prototype,r),n&&rt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function at(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==ot(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ot(o)?o:String(o)),n)}var i,o}function st(t,e){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},st(t,e)}function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ct(t);if(e){var i=ct(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ct(t){return ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ct(t)}var lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&st(t,e)}(o,t);var e,r,n,i=ut(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).currentLoop=0,e.loops=3,e}return e=o,(r=[{key:"draw",value:function(){g.CurrentAsteroid&&(g.CurrentAsteroid.empty||(this.x=g.CurrentAsteroid.x,this.y=g.CurrentAsteroid.y,this.looping(),this.currentLoop===this.loops&&(this.r++,this.r=this.r>360?0:this.r++,this.currentLoop=0),ctx.save(),ctx.translate(this.x,this.y),ctx.rotate(this.r),ctx.drawImage(this.image,this.frameX,this.frameY,this.frameW,this.frameH,0-this.w/2,0-this.h/2,this.w,this.h),ctx.restore()))}}])&&at(e.prototype,r),n&&at(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(P);function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}function ht(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==ft(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ft(o)?o:String(o)),n)}var i,o}function yt(t,e){return yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yt(t,e)}function pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=mt(t);if(e){var i=mt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function mt(t){return mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mt(t)}var gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yt(t,e)}(o,t);var e,r,n,i=pt(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).color=t.color,e.alpha=t.alpha,e.w=t.w,e.h=t.h,e}return e=o,(r=[{key:"draw",value:function(){ctx.save(),ctx.fillStyle=this.color,ctx.fillRect(this.x,this.y,this.w,this.h),ctx.globalAlpha=this.alpha,ctx.restore()}}])&&ht(e.prototype,r),n&&ht(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(P);function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==dt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===dt(o)?o:String(o)),n)}var i,o}var vt=[{x:0,y:0,t:"A"},{x:7,y:0,t:"B"},{x:0,y:10,t:"C"},{x:7,y:10,t:"D"},{x:0,y:20,t:"E"},{x:7,y:20,t:"F"},{x:0,y:30,t:"G"},{x:7,y:30,t:"H"}],wt=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.background=new U({id:"inventory",w:50,h:80,frameX:190,frameY:0,frameW:110,frameH:145,sheet:"ui.png",frameTotal:1,fixed:!0}),this.background.x=(g.W-this.background.w)/2,this.background.y=(g.H-this.background.h)/2,this.mineralsAccount=[],this.mineralsTypes=[],this.showInventory=!1,this.slots=vt.filter((function(t){return!!e.getMineral(t.t)})).map((function(t){var r=e.getMineral(t.t);return{type:t.t,qty:0,spriteImage:new U({id:"inv_mineral_"+t.t,x:e.background.x+e.background.w/2+t.x*g.Block,y:e.background.y+3*g.Block+t.y*g.Block,w:6,h:6,sheet:r.sheet.image,frameX:r.sheet.x,frameY:r.sheet.y,frameW:r.sheet.w,frameH:r.sheet.h,frameTotal:r.sheet.frameTotal}),spriteText:new E({id:"inv_mineral_qty_"+t.t,x:e.background.x+e.background.w/2+t.x*g.Block+6*g.Block,y:e.background.y+3*g.Block+t.y*g.Block+7*g.Block,size:3*g.Block,color:"black",colorLine:"black",align:"end"})}}))}var e,r,n;return e=t,(r=[{key:"draw",value:function(){g.Inventory.showInventory&&(this.background.draw(),this.slots.filter((function(t){return t.qty>0})).forEach((function(t){t.spriteImage.draw(),t.spriteText.draw()})))}},{key:"getMineral",value:function(t){return f.find((function(e){return e.type===t}))}},{key:"updateMinerals",value:function(){var t=this;g.MineralsTotal.forEach((function(e){t.mineralsTypes.includes(e)||(t.mineralsTypes.push(e),t.mineralsAccount.push({type:e,qty:1}))})),this.mineralsAccount=this.mineralsAccount.map((function(t){return t.qty=g.MineralsTotal.filter((function(e){return e===t.type})).length,t})),this.slots=this.slots.map((function(e){var r=t.mineralsAccount.find((function(t){return t.type===e.type}));return r&&(e.qty=r.qty,e.spriteText.text=r.qty),e}))}}])&&bt(e.prototype,r),n&&bt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function xt(t){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xt(t)}function _t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==xt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===xt(o)?o:String(o)),n)}var i,o}var St=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fontSize=3*g.Block,this.create()}var e,r,n;return e=t,(r=[{key:"create",value:function(){this.setXp(),this.setMoney(),this.setControls()}},{key:"setControls",value:function(){this.controlsButton=new U({fixed:!0,id:"ui_controlsButton",w:8,h:8,frameX:0,frameY:0,frameW:64,frameH:64,totaFrames:1,sheet:"controls-icon.png"}),this.controlsButton.x=g.W/2-this.controlsButton.w/2,this.controlsButton.y=g.H-1.5*this.controlsButton.h}},{key:"setXp",value:function(){this.xpPanel=new U({fixed:!0,id:"ui_panel",w:18,h:3,frameX:0,frameY:0,frameW:190,frameH:49,totaFrames:1,sheet:"ui.png"}),this.xpPanel.x=g.W/2+g.W/10,this.xpPanel.y=this.xpPanel.h,this.xpIcon=new P({id:"ui_xpIcon",fixed:!0,w:3,h:3,frameX:0,frameY:0,frameW:17,frameH:18,frameVertical:!1,frameTotal:1,sheet:"xpicon.png"}),this.xpIcon.x=this.xpPanel.x+this.xpPanel.w-this.xpIcon.w/2,this.xpIcon.y=this.xpPanel.y+this.xpIcon.h/1.8,this.xpText=new E({id:"ui_xpText",x:this.xpPanel.x+this.xpPanel.w-this.xpIcon.w,y:this.xpPanel.y+2.4*g.Block,size:this.fontSize,color:"black",colorLine:"black",align:"end"})}},{key:"setMoney",value:function(){this.moneyPanel=new U({fixed:!0,id:"ui_moneyPanel",w:18,h:3,frameX:0,frameY:0,frameW:190,frameH:49,totaFrames:1,sheet:"ui.png"}),this.moneyPanel.x=g.W/2-this.moneyPanel.w-g.W/10,this.moneyPanel.y=this.moneyPanel.h,this.moneyIcon=new P({id:"ui_moneyIcon",fixed:!0,w:3,h:3,frameX:0,frameY:0,frameW:17,frameH:18,frameVertical:!1,frameTotal:1,sheet:"moneyicon.png"}),this.moneyIcon.x=this.moneyPanel.x+this.moneyPanel.w-this.moneyIcon.w/2,this.moneyIcon.y=this.moneyPanel.y+this.xpIcon.h/1.8,this.moneyText=new E({id:"ui_moneyText",x:this.moneyPanel.x+this.moneyPanel.w-this.moneyIcon.w,y:this.moneyPanel.y+2.4*g.Block,size:this.fontSize,color:"black",colorLine:"black",align:"end"})}},{key:"click",value:function(t){w.isHiting(t,g.UiPanel.controlsButton)?g.Inventory.showInventory=!0:g.Inventory.showInventory&&!w.isHiting(t,g.Inventory.background)&&(g.Inventory.showInventory=!1)}},{key:"draw",value:function(){this.xpText.text=g.XpTotal.toString(),this.moneyText.text=g.MoneyTotal.toString(),this.xpPanel.draw(),this.xpIcon.draw(),this.xpText.draw(),this.moneyPanel.draw(),this.moneyIcon.draw(),this.moneyText.draw(),this.controlsButton.draw()}}])&&_t(e.prototype,r),n&&_t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Pt(t){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt(t)}function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function kt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Ot(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ot(o)?o:String(o)),n)}var i,o}var jt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.W=window.innerWidth,this.H=window.innerHeight,this.BkgProportion=4,this.CenterVoid=this.GlobalTime=0,this.MarkTime=0,this.Speed=10,this.CurrentScreen="levelStart",this.GameOver=!1,this.Pause=!1,this.SetNewGame=!0,this.Asteroids=[],this.AsteroidsNumber=0,this.CargoTotal=0,this.InCentral=!1,this.HitsLabels=[],this.Stars=[],this.Margin=100,this.MineralsTotal=[],this.XpTotal=0,this.MoneyTotal=0,this.setDevice()}var e,r,n;return e=t,(r=[{key:"setDevice",value:function(){this.W<500||this.H<500?(this.Device="mobile",this.Block=o,this.OffSetHorizontal=this.W*a,this.OffSetVertical=this.H*s,this.CenterVoid={x:0,y:this.H/2-this.H/4,w:this.W,h:this.H/2}):(this.Device="desktop",this.Block=i,this.OffSetHorizontal=this.W*u,this.OffSetVertical=this.H*c,this.CenterVoid={x:this.W/2-this.W/4,y:this.H/2-this.H/4,w:this.W/2,h:this.H/2})}}])&&kt(e.prototype,r),n&&kt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Tt=document.getElementById("canvas");function Ct(){switch(ctx.clearRect(0,0,g.W,g.H),g.CurrentScreen){case"levelStart":g.LevelLimits={t:-g.OffSetVertical,r:g.W+g.OffSetHorizontal,b:g.H+g.OffSetVertical,l:-g.OffSetHorizontal},g.SetNewGame&&(g.GameOver=!1,g.SetNewGame=!1,g.Background=new gt({x:0,y:0,w:g.W,h:g.H,color:"#2c2137",alpha:1}),g.Anchor=new P({id:"anchor",x:0,y:0,w:g.W/g.Block,h:g.H/g.Block}),g.VisibleArea=new gt({id:"visiblArea",x:0,y:0,w:g.W,h:g.H}),g.Stars=Array.from({length:1e3},(function(t,e){return new U({id:"star_"+e,x:w.random(g.LevelLimits.l,g.LevelLimits.r),y:w.random(g.LevelLimits.t,g.LevelLimits.b),w:4,h:4,frameX:50*w.random(0,4),frameY:50*w.random(0,4),frameW:50,frameH:50,totaFrames:1,sheet:"stars.png"})})),g.AsteroidsNumber=400,it.createGroup(),g.Central=new P({id:"central",x:g.W/2,y:g.H/2,w:10,h:10,sheet:"central.png",frameX:0,frameY:0,frameW:91,frameH:90,frameTotal:1,r:20,scaleX:2,scaleY:2,mini:!0}),g.Hero=new X({id:"hero",x:g.W/2,y:g.H/2,h:6,w:6,sheet:"ship.png",frameX:0,frameY:0,frameW:50,frameH:50,frameTotal:1,r:0,scaleX:1,scaleY:1}),g.Hero.target={x:g.Hero.x,y:g.Hero.y},g.Crosshair=new lt({id:"crosshair",w:8,h:8,frameX:0,frameY:0,frameW:64,frameH:64,sheet:"crosshair158.png",frameTotal:1,r:0}),g.Inventory=new wt,g.UiPanel=new St),g.CurrentScreen="action",g.MarkTime=0,g.GlobalTime=0,document.body.addEventListener("click",(function(t){var e;g.Hero.click(t),null===(e=g.CurrentAsteroid)||void 0===e||e.click(t),g.UiPanel.click(t)}));break;case"action":g.CurrentAsteroid=g.Hero.colisionWith(g.Asteroids),g.InCentral="object"===Pt(g.Hero.colisionWith([g.Central])),g.Hero.unloadCargo(),g.Anchor.positionByHero(),g.Background.draw(),g.Stars.forEach((function(t){t.draw()})),g.Asteroids.forEach((function(t){return t.draw()})),g.Central.draw(),g.Hero.draw(),g.Crosshair.draw(),g.HitsLabels.forEach((function(t){return t.draw()})),g.HitsLabels=g.HitsLabels.filter((function(t){return t.currentLoop<t.loops})),g.Inventory.draw(),g.UiPanel.draw()}}globalThis.g=new jt,globalThis.ctx=Tt.getContext("2d"),Tt.width=g.W,Tt.height=g.H,setInterval((function(){g.GlobalTime=g.GlobalTime+.5}),500);setInterval(Ct,n)})()})();